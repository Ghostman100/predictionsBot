!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("io",[],t):"object"==typeof exports?exports.io=t():e.io=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e,t){"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var n,i=r(e),s=i.source,u=i.id,h=i.path,d=l[u]&&h in l[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(c("ignoring socket cache for %s",s),n=a(s,t)):(l[u]||(c("new io instance for %s",s),l[u]=a(s,t)),n=l[u]),i.query&&!t.query?t.query=i.query:t&&"object"===o(t.query)&&(t.query=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(t.query)),n.socket(i.path,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(1),s=n(7),a=n(17),c=n(3)("socket.io-client");e.exports=t=i;var l=t.managers={};t.protocol=s.protocol,t.connect=i,t.Manager=n(17),t.Socket=n(44)},function(e,t,n){(function(t){"use strict";var i=n(2),o=n(3)("socket.io-client:url");e.exports=function(e,n){var r=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}}).call(t,function(){return this}())},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),r=e.indexOf("]");-1!=o&&-1!=r&&(e=e.substring(0,o)+e.substring(o,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=n.exec(e||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return-1!=o&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){(function(i){function o(){try{return t.storage.debug}catch(e){}if(void 0!==i&&"env"in i)return i.env.DEBUG}(t=e.exports=n(5)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var i="color: "+this.color,o=0,r=0;return(e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(t,n(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function r(){p&&d&&(p=!1,d.length?f=d.concat(f):m=-1,f.length&&s())}function s(){if(!p){var e=o(r);p=!0;for(var t=f.length;t;){for(d=f,f=[];++m<t;)d&&d[m].run();m=-1,t=f.length}d=null,p=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var l,u,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var d,f=[],p=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new a(e,t)),1!==f.length||p||o(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){function i(e){function n(){}function i(){var e=i,n=+new Date,s=n-(o||n);e.diff=s,e.prev=o,e.curr=n,o=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=t.colors[r++%t.colors.length]);for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var l=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;l++;var o=t.formatters[i];if("function"==typeof o){var r=a[l];n=o.call(e,r),a.splice(l,1),l--}return n}),a=t.formatArgs.apply(e,a);(i.log||t.log||console.log.bind(console)).apply(e,a)}n.enabled=!1,i.enabled=!0;var s=t.enabled(e)?i:n;return s.namespace=e,s}(t=e.exports=i.debug=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)n[o]&&("-"===(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(6),t.names=[],t.skips=[],t.formatters={};var o,r=0},function(e,t){function n(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var i=1e3,o=60*i,r=60*o,s=24*r,a=365.25*s;e.exports=function(e,t){t=t||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return t.long?function(e){return n(e,s,"day")||n(e,r,"hour")||n(e,o,"minute")||n(e,i,"second")||e+" ms"}(e):function(e){return e>=s?Math.round(e/s)+"d":e>=r?Math.round(e/r)+"h":e>=o?Math.round(e/o)+"m":e>=i?Math.round(e/i)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function i(){}function o(e){var n="",i=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,n+=e.nsp),null!=e.id&&(i&&(n+=",",i=!1),n+=e.id),null!=e.data&&(i&&(n+=","),n+=u.stringify(e.data)),l("encoded %j as %s",e,n),n}function r(){this.reconstructor=null}function s(e){var n={},i=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return c();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var o="";"-"!=e.charAt(++i)&&(o+=e.charAt(i),i!=e.length););if(o!=Number(o)||"-"!=e.charAt(i))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"==e.charAt(i+1))for(n.nsp="";++i;){if(","==(s=e.charAt(i)))break;if(n.nsp+=s,i==e.length)break}else n.nsp="/";var r=e.charAt(i+1);if(""!==r&&Number(r)==r){for(n.id="";++i;){var s=e.charAt(i);if(null==s||Number(s)!=s){--i;break}if(n.id+=e.charAt(i),i==e.length)break}n.id=Number(n.id)}return e.charAt(++i)&&(n=function(e,t){try{e.data=u.parse(t)}catch(e){return c()}return e}(n,e.substr(i))),l("decoded %s as %j",e,n),n}function a(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error"}}var l=n(8)("socket.io-parser"),u=n(11),h=n(13),d=n(14),f=n(16);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=i,t.Decoder=r,i.prototype.encode=function(e,n){if(l("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)!function(e,t){d.removeBlobs(e,function(e){var n=d.deconstructPacket(e),i=o(n.packet),r=n.buffers;r.unshift(i),t(r)})}(e,n);else{n([o(e)])}},h(r.prototype),r.prototype.add=function(e){var n;if("string"==typeof e)n=s(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new a(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},r.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){function i(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=n(9)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var i="color: "+this.color,o=0,r=0;return(e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(i())},function(e,t,n){function i(e){function n(){}function i(){var e=i,n=+new Date,s=n-(o||n);e.diff=s,e.prev=o,e.curr=n,o=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=t.colors[r++%t.colors.length]);var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var c=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;c++;var o=t.formatters[i];if("function"==typeof o){var r=a[c];n=o.call(e,r),a.splice(c,1),c--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));(i.log||t.log||console.log.bind(console)).apply(e,a)}n.enabled=!1,i.enabled=!0;var s=t.enabled(e)?i:n;return s.namespace=e,s}(t=e.exports=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(10),t.names=[],t.skips=[],t.formatters={};var o,r=0},function(e,t){function n(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var i=1e3,o=60*i,r=60*o,s=24*r,a=365.25*s;e.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}(e):t.long?function(e){return n(e,s,"day")||n(e,r,"hour")||n(e,o,"minute")||n(e,i,"second")||e+" ms"}(e):function(e){return e>=s?Math.round(e/s)+"d":e>=r?Math.round(e/r)+"h":e>=o?Math.round(e/o)+"m":e>=i?Math.round(e/i)+"s":e+"ms"}(e)}},function(e,t,n){(function(e,n){(function(){function i(e,t){function n(e){if(n[e]!==g)return n[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=n("json-stringify")&&n("json-parse");else{var o,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,u="function"==typeof c&&b;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===c(0)&&"0"===c(new r)&&'""'==c(new a)&&c(y)===g&&c(g)===g&&c()===g&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,y,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new l(-1))}catch(e){u=!1}}i=u}if("json-parse"==e){var h=t.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){var d=5==(o=h(s)).a.length&&1===o.a[0];if(d){try{d=!h('"\t"')}catch(e){}if(d)try{d=1!==h("01")}catch(e){}if(d)try{d=1!==h("1.")}catch(e){}}}}catch(e){d=!1}i=d}}return n[e]=!!i}e||(e=s.Object()),t||(t=s.Object());var r=e.Number||s.Number,a=e.String||s.String,c=e.Object||s.Object,l=e.Date||s.Date,u=e.SyntaxError||s.SyntaxError,h=e.TypeError||s.TypeError,d=e.Math||s.Math,f=e.JSON||s.JSON;"object"==typeof f&&f&&(t.stringify=f.stringify,t.parse=f.parse);var p,m,g,v=c.prototype,y=v.toString,b=new l(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!n("json")){var _=n("bug-string-char-index");if(!b)var w=d.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return k[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((p=v.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),m=function(e,t){var n,i,r,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)p.call(i,r)&&s++;return n=i=null,s?m=2==s?function(e,t){var n,i={},o="[object Function]"==y.call(e);for(n in e)o&&"prototype"==n||p.call(i,n)||!(i[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,i,o="[object Function]"==y.call(e);for(n in e)o&&"prototype"==n||!p.call(e,n)||(i="constructor"===n)||t(n);(i||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,r,s="[object Function]"==y.call(e),a=!s&&"function"!=typeof e.constructor&&o[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)s&&"prototype"==n||!a.call(e,n)||t(n);for(r=i.length;n=i[--r];a.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E=function(e,t){return("000000"+(t||0)).slice(-e)},T=function(e){for(var t='"',n=0,i=e.length,o=!_||i>10,r=o&&(_?e.split(""):e);n<i;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=x[s];break;default:if(s<32){t+="\\u00"+E(2,s.toString(16));break}t+=o?r[n]:e.charAt(n)}}return t+'"'},C=function(e,t,n,i,o,r,s){var a,c,l,u,d,f,v,b,_,k,x,A,I,N,B,F;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(c=y.call(a))||p.call(a,"toJSON"))"function"==typeof a.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||p.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(S){for(d=w(a/864e5),l=w(d/365.2425)+1970-1;S(l+1,0)<=d;l++);for(u=w((d-S(l,0))/30.42);S(l,u+1)<=d;u++);d=1+d-S(l,u),v=w((f=(a%864e5+864e5)%864e5)/36e5)%24,b=w(f/6e4)%60,_=w(f/1e3)%60,k=f%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),d=a.getUTCDate(),v=a.getUTCHours(),b=a.getUTCMinutes(),_=a.getUTCSeconds(),k=a.getUTCMilliseconds();a=(l<=0||l>=1e4?(l<0?"-":"+")+E(6,l<0?-l:l):E(4,l))+"-"+E(2,u+1)+"-"+E(2,d)+"T"+E(2,v)+":"+E(2,b)+":"+E(2,_)+"."+E(3,k)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(c=y.call(a)))return""+a;if("[object Number]"==c)return a>-1/0&&a<1/0?""+a:"null";if("[object String]"==c)return T(""+a);if("object"==typeof a){for(N=s.length;N--;)if(s[N]===a)throw h();if(s.push(a),x=[],B=r,r+=o,"[object Array]"==c){for(I=0,N=a.length;I<N;I++)A=C(I,a,n,i,o,r,s),x.push(A===g?"null":A);F=x.length?o?"[\n"+r+x.join(",\n"+r)+"\n"+B+"]":"["+x.join(",")+"]":"[]"}else m(i||a,function(e){var t=C(e,a,n,i,o,r,s);t!==g&&x.push(T(e)+":"+(o?" ":"")+t)}),F=x.length?o?"{\n"+r+x.join(",\n"+r)+"\n"+B+"}":"{"+x.join(",")+"}":"{}";return s.pop(),F}};t.stringify=function(e,t,n){var i,r,s,a;if(o[typeof t]&&t)if("[object Function]"==(a=y.call(t)))r=t;else if("[object Array]"==a){s={};for(var c,l=0,u=t.length;l<u;c=t[l++],("[object String]"==(a=y.call(c))||"[object Number]"==a)&&(s[c]=1));}if(n)if("[object Number]"==(a=y.call(n))){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else"[object String]"==a&&(i=n.length<=10?n:n.slice(0,10));return C("",(c={},c[""]=e,c),r,s,i,"",[])}}if(!n("json-parse")){var A,I,N=a.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw A=I=null,u()},O=function(){for(var e,t,n,i,o,r=I,s=r.length;A<s;)switch(o=r.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?r.charAt(A):r[A],A++,e;case 34:for(e="@",A++;A<s;)if((o=r.charCodeAt(A))<32)F();else if(92==o)switch(o=r.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=B[o],A++;break;case 117:for(t=++A,n=A+4;A<n;A++)(o=r.charCodeAt(A))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||F();e+=N("0x"+r.slice(t,A));break;default:F()}else{if(34==o)break;for(o=r.charCodeAt(A),t=A;o>=32&&92!=o&&34!=o;)o=r.charCodeAt(++A);e+=r.slice(t,A)}if(34==r.charCodeAt(A))return A++,e;F();default:if(t=A,45==o&&(i=!0,o=r.charCodeAt(++A)),o>=48&&o<=57){for(48==o&&(o=r.charCodeAt(A+1))>=48&&o<=57&&F(),i=!1;A<s&&(o=r.charCodeAt(A))>=48&&o<=57;A++);if(46==r.charCodeAt(A)){for(n=++A;n<s&&(o=r.charCodeAt(n))>=48&&o<=57;n++);n==A&&F(),A=n}if(101==(o=r.charCodeAt(A))||69==o){for(43!=(o=r.charCodeAt(++A))&&45!=o||A++,n=A;n<s&&(o=r.charCodeAt(n))>=48&&o<=57;n++);n==A&&F(),A=n}return+r.slice(t,A)}if(i&&F(),"true"==r.slice(A,A+4))return A+=4,!0;if("false"==r.slice(A,A+5))return A+=5,!1;if("null"==r.slice(A,A+4))return A+=4,null;F()}return"$"},q=function(e){var t,n;if("$"==e&&F(),"string"==typeof e){if("@"==(_?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=O());n||(n=!0))n&&(","==e?"]"==(e=O())&&F():F()),","==e&&F(),t.push(q(e));return t}if("{"==e){for(t={};"}"!=(e=O());n||(n=!0))n&&(","==e?"}"==(e=O())&&F():F()),","!=e&&"string"==typeof e&&"@"==(_?e.charAt(0):e[0])&&":"==O()||F(),t[e.slice(1)]=q(O());return t}F()}return e},L=function(e,t,n){var i=j(e,t,n);i===g?delete e[t]:e[t]=i},j=function(e,t,n){var i,o=e[t];if("object"==typeof o&&o)if("[object Array]"==y.call(o))for(i=o.length;i--;)L(o,i,n);else m(o,function(e){L(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,i;return A=0,I=""+e,n=q(O()),"$"!=O()&&F(),A=I=null,t&&"[object Function]"==y.call(t)?j((i={},i[""]=n,i),"",t):n}}}return t.runInContext=i,t}var o={function:!0,object:!0},r=o[typeof t]&&t&&!t.nodeType&&t,s=o[typeof window]&&window||this,a=r&&o[typeof e]&&e&&!e.nodeType&&"object"==typeof n&&n;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(s=a),r)i(s,r);else{var c=s.JSON,l=s.JSON3,u=!1,h=i(s,s.JSON3={noConflict:function(){return u||(u=!0,s.JSON=c,s.JSON3=l,c=l=null),h}});s.JSON={parse:h.parse,stringify:h.stringify}}}).call(this)}).call(t,n(12)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var i=n(15),o=n(16);t.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var r={_placeholder:!0,num:n.length};return n.push(e),r}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){s={};for(var c in e)s[c]=t(e[c]);return s}return e}var n=[],r=e.data,s=e;return s.data=t(r),s.attachments=n.length,{packet:s,buffers:n}},t.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){return t[e.num]}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var r in e)e[r]=n(e[r]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){function r(t,c,l){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){s++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:a=this.result,--s||n(a)},u.readAsArrayBuffer(t)}else if(i(t))for(var h=0;h<t.length;h++)r(t[h],h,t);else if(t&&"object"==typeof t&&!o(t))for(var d in t)r(t[d],d,t)}var s=0,a=t;r(a),s||n(a)}}).call(t,function(){return this}())},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e,t){if(!(this instanceof i))return new i(e,t);e&&"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(18),s=n(44),a=n(35),c=n(7),l=n(46),u=n(47),h=n(3)("socket.io-client:manager"),d=n(42),f=n(48),p=Object.prototype.hasOwnProperty;e.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e,t){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=l(n,"open",function(){i.onopen(),e&&e()}),s=l(n,"error",function(t){if(h("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var c=setTimeout(function(){h("connect attempt timed out after %d",a),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},i.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",u(this,"ondata"))),this.subs.push(l(e,"ping",u(this,"onping"))),this.subs.push(l(e,"pong",u(this,"onpong"))),this.subs.push(l(e,"error",u(this,"onerror"))),this.subs.push(l(e,"close",u(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded")))},i.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},i.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){h("error",e),this.emitAll("error",e)},i.prototype.socket=function(e,t){function n(){~d(o.connecting,i)||o.connecting.push(i)}var i=this.nsps[e];if(!i){i=new s(this,e,t),this.nsps[e]=i;var o=this;i.on("connecting",n),i.on("connect",function(){i.id=o.engine.id}),this.autoConnect&&n()}return i},i.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},i.prototype.packet=function(e){h("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){h("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();h("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(h("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(h("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(h("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(19)},function(e,t,n){e.exports=n(20),e.exports.parser=n(27)},function(e,t,n){(function(t){function i(e,n){if(!(this instanceof i))return new i(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=l(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=l(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof t&&t;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}var o=n(21),r=n(35),s=n(3)("engine.io-client:socket"),a=n(42),c=n(27),l=n(2),u=n(43),h=n(36);e.exports=i,i.priorWebsocketSuccess=!1,r(i.prototype),i.protocol=c.protocol,i.Socket=i,i.Transport=n(26),i.transports=n(21),i.parser=n(27),i.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);return new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;h=h||t}h||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!h)if("pong"===t.type&&"probe"===t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",u),!u)return;i.priorWebsocketSuccess="websocket"===u.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){h||"closed"!==d.readyState&&(s("changing transport and sending upgrade packet"),l(),d.setTransport(u),u.send([{type:"upgrade"}]),d.emit("upgrade",u),u=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,d.emit("upgradeError",n)}}))}function n(){h||(h=!0,l(),u.close(),u=null)}function o(t){var i=new Error("probe error: "+t);i.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",i)}function r(){o("transport closed")}function a(){o("socket closed")}function c(e){u&&e.name!==u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function l(){u.removeListener("open",t),u.removeListener("error",o),u.removeListener("close",r),d.removeListener("close",a),d.removeListener("upgrading",c)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),h=!1,d=this;i.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",o),u.once("close",r),this.once("close",a),this.once("upgrading",c),u.open()},i.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(u(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},i.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},i.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),s("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){s("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e){var i=n(22),o=n(24),r=n(39),s=n(40);t.polling=function(t){var n=!1,s=!1,a=!1!==t.jsonp;if(e.location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),n=t.hostname!==location.hostname||l!==t.port,s=t.secure!==c}if(t.xdomain=n,t.xscheme=s,"open"in new i(t)&&!t.forceJSONP)return new o(t);if(!a)throw new Error("JSONP disabled");return new r(t)},t.websocket=s}).call(t,function(){return this}())},function(e,t,n){(function(t){var i=n(23);e.exports=function(e){var n=e.xdomain,o=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!o&&r)return new XDomainRequest}catch(e){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){(function(t){function i(){}function o(e){if(c.call(this,e),this.requestTimeout=e.requestTimeout,t.location){var n="https:"===location.protocol,i=location.port;i||(i=n?443:80),this.xd=e.hostname!==t.location.hostname||i!==e.port,this.xs=e.secure!==n}else this.extraHeaders=e.extraHeaders}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var a=n(22),c=n(25),l=n(35),u=n(37),h=n(3)("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=r,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new r(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),o=this;i.on("success",t),i.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=i},o.prototype.doPoll=function(){h("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(e),i=this;try{h("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(e){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){i.onLoad()},n.onerror=function(){i.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?i.onLoad():setTimeout(function(){i.onError(n.status)},0))},h("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}t.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(e){}t.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),i=[],o=0,r=n.length;o<r;o++)i.push(n[o]);e=String.fromCharCode.apply(null,i)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},r.requestsCount=0,r.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",s):t.addEventListener&&t.addEventListener("beforeunload",s,!1))}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=n(26),r=n(36),s=n(27),a=n(37),c=n(38),l=n(3)("engine.io-client:polling");e.exports=i;var u=null!=new(n(22))({xdomain:!1}).responseType;a(i,o),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e);s.decodePayload(e,this.socket.binaryType,function(e,n,i){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);return t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var o=n(27),r=n(35);e.exports=i,r(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(e){function i(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(f)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,n,!0,i)},o.readAsArrayBuffer(e.data)}(e,n,i);var o=new Uint8Array(1);o[0]=p[e.type];return i(new v([o.buffer,e.data]))}function o(e,t,n){for(var i=new Array(e.length),o=l(e.length,n),r=function(e,n,o){t(n,function(t,n){i[e]=n,o(t,i)})},s=0;s<e.length;s++)r(s,e[s],o)}var r,s=n(28),a=n(29),c=n(30),l=n(31),u=n(32);e&&e.ArrayBuffer&&(r=n(33));var h="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),d="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=h||d;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},m=s(p),g={type:"error",data:"parser error"},v=n(34);t.encodePacket=function(n,o,r,s){"function"==typeof o&&(s=o,o=!1),"function"==typeof r&&(s=r,r=null);var a=void 0===n.data?void 0:n.data.buffer||n.data;if(e.ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=e.data,r=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=p[e.type];for(var a=0;a<r.length;a++)s[a+1]=r[a];return i(s.buffer)}(n,o,s);if(v&&a instanceof e.Blob)return i(n,o,s);if(a&&a.base64)return function(e,n){return n("b"+t.packets[e.type]+e.data.data)}(n,s);var c=p[n.type];return void 0!==n.data&&(c+=r?u.encode(String(n.data)):String(n.data)),s(""+c)},t.encodeBase64Packet=function(n,i){var o="b"+t.packets[n.type];if(v&&n.data instanceof e.Blob){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];i(o+e)},r.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var a=new Uint8Array(n.data),c=new Array(a.length),l=0;l<a.length;l++)c[l]=a[l];s=String.fromCharCode.apply(null,c)}return o+=e.btoa(s),i(o)},t.decodePacket=function(e,n,i){if(void 0===e)return g;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&!1===(e=function(e){try{e=u.decode(e)}catch(e){return!1}return e}(e)))return g;o=e.charAt(0);return Number(o)==o&&m[o]?e.length>1?{type:m[o],data:e.substring(1)}:{type:m[o]}:g}var o=new Uint8Array(e)[0],r=c(e,1);return v&&"blob"===n&&(r=new v([r])),{type:m[o],data:r}},t.decodeBase64Packet=function(e,t){var n=m[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&v&&(i=new v([i])),{type:n,data:i}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var r=a(e);return n&&r?v&&!f?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i):e.length?void o(e,function(e,i){t.encodePacket(e,!!r&&n,!0,function(e){i(null,function(e){return e.length+":"+e}(e))})},function(e,t){return i(t.join(""))}):i("0:")},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);"function"==typeof n&&(i=n,n=null);var o;if(""==e)return i(g,0,1);for(var r,s,a="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(r=Number(a)))return i(g,0,1);if(s=e.substr(c+1,r),a!=s.length)return i(g,0,1);if(s.length){if(o=t.decodePacket(s,n,!0),g.type==o.type&&g.data==o.data)return i(g,0,1);if(!1===i(o,c+r,l))return}c+=r,a=""}}return""!=a?i(g,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));o(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var i=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(i),r=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}o[r++]=t?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[r++]=parseInt(a[s]);o[r++]=255;for(var i=new Uint8Array(n),s=0;s<i.length;s++)o[r++]=i[s]}),n(o.buffer)})},t.encodePayloadAsBlob=function(e,n){o(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);e=i.buffer,t[0]=0}for(var r=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(r.length+1),o=0;o<r.length;o++)s[o]=parseInt(r[o]);if(s[r.length]=255,v){var a=new v([t.buffer,s.buffer,e]);n(null,a)}})},function(e,t){return n(new v(t))})},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var o=e,r=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),l=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){s=!0;break}u+=a[h]}if(s)return i(g,0,1);o=c(o,2+u.length),u=parseInt(u);var d=c(o,0,u);if(l)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var f=new Uint8Array(d);d="";for(h=0;h<f.length;h++)d+=String.fromCharCode(f[h])}r.push(d),o=c(o,u)}var p=r.length;r.forEach(function(e,o){i(t.decodePacket(e,n,!0),o,p)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(e,t,n){(function(t){var i=n(15);e.exports=function(e){function n(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(i(e)){for(var o=0;o<e.length;o++)if(n(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return!0}return!1}return n(e)}}).call(t,function(){return this}())},function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var o=new Uint8Array(e),r=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)r[a]=o[s];return r.buffer}},function(e,t){e.exports=function(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||function(){},i.count=e,0===e?t():i}},function(e,t,n){var i;(function(e,o){!function(r){function s(e){for(var t,n,i=[],o=0,r=e.length;o<r;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function a(e,t){return v(e>>t&63|128)}function c(e){if(0==(4294967168&e))return v(e);var t="";return 0==(4294965248&e)?t=v(e>>6&31|192):0==(4294901760&e)?(t=v(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=v(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=v(63&e|128)}function l(){if(g>=m)throw Error("Invalid byte index");var e=255&p[g];if(g++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,n,i;if(g>m)throw Error("Invalid byte index");if(g==m)return!1;if(e=255&p[g],g++,0==(128&e))return e;if(192==(224&e)){var o;if((i=(31&e)<<6|(o=l()))>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(o=l(),t=l(),(i=(15&e)<<12|o<<6|t)>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=l(),t=l(),n=l(),(i=(15&e)<<18|o<<12|t<<6|n)>=65536&&i<=1114111))return i;throw Error("Invalid WTF-8 detected")}function h(e){p=s(e),m=p.length,g=0;for(var t,n=[];!1!==(t=u());)n.push(t);return function(e){for(var t,n=e.length,i=-1,o="";++i<n;)(t=e[i])>65535&&(o+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=v(t);return o}(n)}var d="object"==typeof t&&t,f=("object"==typeof e&&e&&e.exports,"object"==typeof o&&o);var p,m,g,v=String.fromCharCode,y={version:"1.0.0",encode:function(e){for(var t=s(e),n=t.length,i=-1,o="";++i<n;)o+=c(t[i]);return o},decode:h};void 0!==(i=function(){return y}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(12)(e),function(){return this}())},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<e.length;i++)n[e.charCodeAt(i)]=i;t.encode=function(t){var n,i=new Uint8Array(t),o=i.length,r="";for(n=0;n<o;n+=3)r+=e[i[n]>>2],r+=e[(3&i[n])<<4|i[n+1]>>4],r+=e[(15&i[n+1])<<2|i[n+2]>>6],r+=e[63&i[n+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(e){var t,i,o,r,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(t=0;t<c;t+=4)i=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],r=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],h[l++]=i<<2|o>>4,h[l++]=(15&o)<<4|r>>2,h[l++]=(3&r)<<6|63&s;return u}}()},function(e,t){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=o.buffer}e[t]=i}}}function i(e,t){t=t||{};var i=new o;n(e);for(var r=0;r<e.length;r++)i.append(e[r]);return t.type?i.getBlob(t.type):i.getBlob()}var o=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),s=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=o&&o.prototype.append&&o.prototype.getBlob;e.exports=r?s?t.Blob:function(e,t){return n(e),new Blob(e,t||{})}:a?i:void 0}).call(t,function(){return this}())},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i,o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do{t=r[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function i(){var e=n(+new Date);return e!==o?(c=0,o=e):e+"."+n(c++)}for(var o,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,a={},c=0,l=0;l<s;l++)a[r[l]]=l;i.encode=n,i.decode=function(e){var t=0;for(l=0;l<e.length;l++)t=t*s+a[e.charAt(l)];return t},e.exports=i},function(e,t,n){(function(t){function i(){}function o(e){r.call(this,e),this.query=this.query||{},a||(t.___eio||(t.___eio=[]),a=t.___eio),this.index=a.length;var n=this;a.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=i)},!1)}var r=n(25),s=n(37);e.exports=o;var a,c=/\n/g,l=/\\n/g;s(o,r),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=o.iframeId,r.src="javascript:0"}r.id=o.iframeId,o.form.appendChild(r),o.iframe=r}var o=this;if(!this.form){var r,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){(function(t){function i(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=h&&!e.forceNode,this.usingBrowserWebSocket||(d=o),r.call(this,e)}var o,r=n(26),s=n(27),a=n(36),c=n(37),l=n(38),u=n(3)("engine.io-client:websocket"),h=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{o=n(41)}catch(e){}var d=h;d||"undefined"!=typeof window||(d=o),e.exports=i,c(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new d(e):new d(e,void 0,t)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},i.prototype.write=function(e){var n=this;this.writable=!1;for(var i=e.length,o=0,r=i;o<r;o++)!function(e){s.encodePacket(e,n.supportsBinary,function(o){if(!n.usingBrowserWebSocket){var r={};if(e.options&&(r.compress=e.options.compress),n.perMessageDeflate){("string"==typeof o?t.Buffer.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(r.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,r)}catch(e){u("websocket closed before onclose event")}--i||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(e[o])},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e);return t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},i.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===i.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t){(function(t){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(i,"@").replace(o,"]").replace(r,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o=n(7),r=n(35),s=n(45),a=n(46),c=n(47),l=n(3)("socket.io-client:socket"),u=n(29);e.exports=i;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=r.prototype.emit;r(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",c(this,"onopen")),a(e,"packet",c(this,"onpacket")),a(e,"close",c(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},i.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(h.hasOwnProperty(e))return d.apply(this,arguments),this;var t=s(arguments),n=o.EVENT;u(t)&&(n=o.BINARY_EVENT);var i={type:n,data:t};return i.options={},i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){l("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},i.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=s(arguments);l("sending ack %j",i);var r=u(i)?o.BINARY_ACK:o.ACK;t.packet({type:r,id:e,data:i})}}},i.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},i.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},function(e,t){"use strict";e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])}),function(e,t){"use strict";var n="model",i="name",o="type",r="vendor",s="version",a="mobile",c="tablet",l={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},u={rgx:function(e,t){for(var n,i,o,r,s,a,c=0;c<t.length&&!s;){var l=t[c],u=t[c+1];for(n=i=0;n<l.length&&!s;)if(s=l[n++].exec(e))for(o=0;o<u.length;o++)a=s[++i],"object"==typeof(r=u[o])&&r.length>0?2==r.length?"function"==typeof r[1]?this[r[0]]=r[1].call(this,a):this[r[0]]=r[1]:3==r.length?"function"!=typeof r[1]||r[1].exec&&r[1].test?this[r[0]]=a?a.replace(r[1],r[2]):void 0:this[r[0]]=a?r[1].call(this,a,r[2]):void 0:4==r.length&&(this[r[0]]=a?r[3].call(this,a.replace(r[1],r[2])):void 0):this[r]=a||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(l.has(t[n][i],e))return"?"===n?void 0:n}else if(l.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},d={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,s],[/(opios)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],s],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],s],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[i,s],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],s],[/(edge)\/((\d+)?[\w\.]+)/i],[i,s],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],s],[/(puffin)\/([\w\.]+)/i],[[i,"Puffin"],s],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],s],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],s],[/(QQ)\/([\d\.]+)/i],[i,s],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[i,s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[i,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[s,[i,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[i,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],s],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[i,/(.+(?:g|us))(.+)/,"$1 $2"],s],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[s,[i,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[i,s],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],s],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],s],[/(coast)\/([\w\.]+)/i],[[i,"Opera Coast"],s],[/fxios\/([\w\.-]+)/i],[s,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[s,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[s,i],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[i,"GSA"],s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[s,u.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],s],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",l.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",l.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",l.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[n,r,[o,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[n,[r,"Apple"],[o,c]],[/(apple\s{0,1}tv)/i],[[n,"Apple TV"],[r,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[r,n,[o,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[n,[r,"Amazon"],[o,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[n,u.str,h.device.amazon.model],[r,"Amazon"],[o,a]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[n,r,[o,a]],[/\((ip[honed|\s\w*]+);/i],[n,[r,"Apple"],[o,a]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[r,n,[o,a]],[/\(bb10;\s(\w+)/i],[n,[r,"BlackBerry"],[o,a]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[n,[r,"Asus"],[o,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[r,"Sony"],[n,"Xperia Tablet"],[o,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[n,[r,"Sony"],[o,a]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[r,n,[o,"console"]],[/android.+;\s(shield)\sbuild/i],[n,[r,"Nvidia"],[o,"console"]],[/(playstation\s[34portablevi]+)/i],[n,[r,"Sony"],[o,"console"]],[/(sprint\s(\w+))/i],[[r,u.str,h.device.sprint.vendor],[n,u.str,h.device.sprint.model],[o,a]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[r,n,[o,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[r,[n,/_/g," "],[o,a]],[/(nexus\s9)/i],[n,[r,"HTC"],[o,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[n,[r,"Huawei"],[o,a]],[/(microsoft);\s(lumia[\s\w]+)/i],[r,n,[o,a]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[n,[r,"Microsoft"],[o,"console"]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[r,"Microsoft"],[o,a]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[n,[r,"Motorola"],[o,a]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[n,[r,"Motorola"],[o,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[r,l.trim],[n,l.trim],[o,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[r,"Samsung"],[o,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[n,[r,"Sharp"],[o,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[r,"Samsung"],n,[o,c]],[/smart-tv.+(samsung)/i],[r,[o,"smarttv"],n],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[r,"Samsung"],n,[o,a]],[/sie-(\w+)*/i],[n,[r,"Siemens"],[o,a]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[r,"Nokia"],n,[o,a]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[n,[r,"Acer"],[o,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[n,[r,"LG"],[o,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[r,"LG"],n,[o,c]],[/(lg) netcast\.tv/i],[r,n,[o,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[n,[r,"LG"],[o,a]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[n,[r,"Lenovo"],[o,c]],[/linux;.+((jolla));/i],[r,n,[o,a]],[/((pebble))app\/[\d\.]+\s/i],[r,n,[o,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[r,n,[o,a]],[/crkey/i],[[n,"Chromecast"],[r,"Google"]],[/android.+;\s(glass)\s\d/i],[n,[r,"Google"],[o,"wearable"]],[/android.+;\s(pixel c)\s/i],[n,[r,"Google"],[o,c]],[/android.+;\s(pixel xl|pixel)\s/i],[n,[r,"Google"],[o,a]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[n,/_/g," "],[r,"Xiaomi"],[o,a]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[n,/_/g," "],[r,"Xiaomi"],[o,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[n,[r,"Meizu"],[o,c]],[/android.+a000(1)\s+build/i],[n,[r,"OnePlus"],[o,a]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[n,[r,"RCA"],[o,c]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[n,[r,"Dell"],[o,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[n,[r,"Verizon"],[o,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[r,"Barnes & Noble"],n,[o,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[n,[r,"NuVision"],[o,c]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[r,"ZTE"],n,[o,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[n,[r,"Swiss"],[o,a]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[n,[r,"Swiss"],[o,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[n,[r,"Zeki"],[o,c]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[r,"Dragon Touch"],n,[o,c]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[n,[r,"Insignia"],[o,c]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[n,[r,"NextBook"],[o,c]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[r,"Voice"],n,[o,a]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[r,"LvTel"],n,[o,a]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[n,[r,"Envizen"],[o,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[r,n,[o,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[n,[r,"MachSpeed"],[o,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[r,n,[o,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[n,[r,"Rotor"],[o,c]],[/android.+(KS(.+))\s+build/i],[n,[r,"Amazon"],[o,c]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[r,n,[o,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[o,l.lowerize],r,n],[/(android.+)[;\/].+build/i],[n,[r,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,s],[/rv\:([\w\.]+).*(gecko)/i],[s,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[s,u.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[s,u.str,h.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[i,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[i,"Symbian"],s],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],s],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[i,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[i,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[i,s],[/(haiku)\s(\w+)/i],[i,s],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[s,/_/g,"."],[i,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[s,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[i,s]]},f=function(t,n){if("object"==typeof t&&(n=t,t=void 0),!(this instanceof f))return new f(t,n).getResult();var i=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),o=n?l.extend(d,n):d;return this.getBrowser=function(){var e={name:void 0,version:void 0};return u.rgx.call(e,i,o.browser),e.major=l.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return u.rgx.call(e,i,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return u.rgx.call(e,i,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return u.rgx.call(e,i,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return u.rgx.call(e,i,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};f.VERSION="0.7.17",f.BROWSER={NAME:i,MAJOR:"major",VERSION:s},f.CPU={ARCHITECTURE:"architecture"},f.DEVICE={MODEL:n,VENDOR:r,TYPE:o,CONSOLE:"console",MOBILE:a,SMARTTV:"smarttv",TABLET:c,WEARABLE:"wearable",EMBEDDED:"embedded"},f.ENGINE={NAME:i,VERSION:s},f.OS={NAME:i,VERSION:s},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.UAParser=f):e&&(e.UAParser=f);var p=e&&(e.jQuery||e.Zepto);if(void 0!==p){var m=new f;p.ua=m.getResult(),p.ua.get=function(){return m.getUA()},p.ua.set=function(e){m.setUA(e);var t=m.getResult();for(var n in t)p.ua[n]=t[n]}}}("object"==typeof window?window:this),function(e,t,n){"function"==typeof define&&define.amd?define(t,n):e[t]=n()}(this,"SocketIOFileUpload",function(){return function(e){"use strict";var t=this;if(!window.File||!window.FileReader)throw new Error("Socket.IO File Upload: Browser Not Supported");var n={},i=[],o=[];t.fileInputElementId="siofu_input",t.useText=!1,t.serializedOctets=!1,t.useBuffer=!1;var r=function(e,n){var i=document.createEvent("Event");i.initEvent(e,!1,!1);for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return t.dispatchEvent(i)},s=[],a=function(e,t,n,i){e.addEventListener(t,n,i),s.push(arguments)},c=function(e,t,n,i){e.removeEventListener&&e.removeEventListener(t,n,i)},l=function(n){if(null!==t.maxFileSize&&n.size>t.maxFileSize)r("error",{file:n,message:"Attempt by client to upload file exceeding the maximum file size",code:1});else{if(r("start",{file:n})){var s,c=new FileReader,l=0,u=i.length,h=t.useText;i.push(n);a(c,"progress",function(e){}),a(c,"load",function(i){!function(n){var i,o=!1;if(h)i=c.result.slice(l,n);else try{var r=new Uint8Array(c.result,l,n);t.serializedOctets?i=r:t.useBuffer?i=r.buffer:(o=!0,i=d(r))}catch(t){return void e.emit("siofu_done",{id:u,interrupt:!0})}e.emit("siofu_progress",{id:u,start:l,end:n,content:i,base64:o}),l=n}(i.loaded),e.emit("siofu_done",{id:u}),r("load",{file:n,reader:c,name:s})}),a(c,"error",function(){e.emit("siofu_done",{id:u,interrupt:!0})}),a(c,"abort",function(){e.emit("siofu_done",{id:u,interrupt:!0})}),e.emit("siofu_start",{name:n.name,mtime:n.lastModifiedDate,meta:n.meta,encoding:h?"text":"octet",id:u});var f;f=h?function(e){c.readAsText(n),s=e}:function(e){c.readAsArrayBuffer(n),s=e},o.push(f)}}},u=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)e[t].meta={};r("choose",{files:e})&&function(e){for(var t=0;t<e.length;t++)l(e[t])}(e)}},h=function(e){var t=e.target.files||e.dataTransfer.files;e.preventDefault(),u(t)};this.submitFiles=function(e){e&&u(e)},this.listenOnSubmit=function(e,t){console.log("Listen"),t.files&&a(e,"click",function(){u(t.files)},!1)},this.listenOnArraySubmit=function(e,t){for(var n in t)this.listenOnSubmit(e,t[n])},this.listenOnInput=function(e){e.files&&a(e,"change",h,!1)},this.listenOnDrop=function(e){a(e,"dragover",function(e){e.preventDefault()},!1),a(e,"drop",h)},this.prompt=function(){var e=function(){var e=document.getElementById(t.fileInputElementId);return e||((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("id",t.fileInputElementId),e.style.display="none",document.body.appendChild(e)),e}();a(e,"change",h,!1);var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)},this.destroy=function(){!function(){for(var e=s.length-1;e>=0;e--)c.apply(this,s[e]);s=[]}(),function(){var e=document.getElementById(t.fileInputElementId);e&&e.parentNode.removeChild(e)}()},this.addEventListener=function(e,t){n[e]||(n[e]=[]),n[e].push(t)},this.removeEventListener=function(e,t){if(!n[e])return!1;for(var i=0;i<n[e].length;i++)if(n[e][i]===t)return n[e].splice(i,1),!0;return!1},this.dispatchEvent=function(e){var t=n[e.type];if(!t)return!0;for(var i=!0,o=0;o<t.length;o++){!1===t[o](e)&&(i=!1)}return i};var d=function(e){var t,n=e.buffer.byteLength,i="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0;t<n;t+=3)i+=o[e[t]>>2],i+=o[(3&e[t])<<4|e[t+1]>>4],i+=o[(15&e[t+1])<<2|e[t+2]>>6],i+=o[63&e[t+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i};e.on("siofu_ready",function(e){o[e.id](e.name)}),e.on("siofu_complete",function(e){r("complete",{file:i[e.id],detail:e.detail,success:e.success})}),e.on("siofu_error",function(e){r("error",{file:i[e.id],message:e.message,code:0})})}}),function(e,t,n,i){"function"==typeof define&&define.amd?define("chat_widget",["io","SocketIOFileUpload"],i):e.chat_widget=i(io,SocketIOFileUpload)}(this,0,0,function(io,SocketIOFileUpload){return new function(){function isDescendant(e,t){return e.parentNode==t||e.parentNode!=document&&isDescendant(e.parentNode,t)}function getElementsByClassName(e,t){var n=[],i=new RegExp("\\b"+e+"\\b"),o=t.getElementsByTagName("*");t=t||document.getElementsByTagName("body")[0];for(var r=0,s=o.length;r<s;r++)i.test(o[r].className)&&n.push(o[r]);return n}function ratingInit(){"use strict";function e(e,t,n,i){function o(e,t){for(var n=0;n<e.length;n++){t(e[n],n)}}function r(e){!function(e){e.addEventListener("mouseover",function(t){o(c,function(t,n){n<=parseInt(e.getAttribute("data-index"))?t.classList.add("is-active"):t.classList.remove("is-active")})})}(e),function(e){e.addEventListener("mouseout",function(e){-1===c.indexOf(e.relatedTarget)&&s(null,!1)})}(e),function(e){e.addEventListener("click",function(t){t.preventDefault(),s(parseInt(e.getAttribute("data-index"))+1,!0)})}(e)}function s(e,r){e<0||e>n||(void 0===r&&(r=!0),t=0===e||e>0?e:t,o(c,function(e,n){n<t?e.classList.add("is-active"):e.classList.remove("is-active")}),i&&r&&i(a()))}function a(){return t}var c=[];return function(){if(!e)throw Error("No element supplied.");if(!n)throw Error("No max rating supplied.");if(t||(t=0),t<0||t>n)throw Error("Current rating is out of bounds.");for(var i=0;i<n;i++){var o=document.createElement("li");o.classList.add("c-rating__item"),o.setAttribute("data-index",i),i<t&&o.classList.add("is-active"),e.appendChild(o),c.push(o),r(o)}}(),{setRating:s,getRating:a}}window.JSFrame.ratingInit=e}function Core(){function e(e){var n=[];return e instanceof Array&&e.length>0&&e.forEach(function(e){var i=t.getConfig(e);i?n.push(i):n.push(t.getService(e))}),n}var t=this,n={button:[],block:["queue","auth","offline","online","finish","faq","question","notice","close_offline"]},i={controller:{},service:{},config:{}},o={controller:{},service:{}};/Android/.test(navigator.appVersion)&&window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoView()},0)}),t.handlers={},t.reInit=function(){Object.keys(o.controller).forEach(function(e){o.controller[e].render()}),o.controller.block&&o.controller.block.trigger("ready"),o.controller.finish&&o.controller.finish.trigger("ready")},t.windowProtocol="http:"===window.location.protocol||"https:"===window.location.protocol?window.location.protocol:"https:",t.controller=function(e,t,n){i.controller[e]=[t,n]},t.service=function(e,t,n){i.service[e]=[t,n]},t.config=function(e,t){i.config[e]=t},t.run=function(){var e=t.getService("router");e.onChange(function(e,i){t.getController(e);for(var o in n){s=t.getController(o);if(o===e)s.show();else if(s.hide(),n[o]&&n[o].length>0)for(r=0;r<n[o].length;r++)t.getController(n[o][r]).hide()}if(n[e]&&n[e].length>0&&i)for(var r=0;r<n[e].length;r++){var s=t.getController(n[e][r]);n[e][r]===i.action?s.show():s.hide()}});var i=e.getCurrent();i?e.go.apply(null,i):e.go("button")},t.getController=function(t){if(!o.controller[t]){var n=i.controller[t];o.controller[t]=new function(){Controller.apply(this,e(["template","dom","handler"])),n[0].apply(this,e(n[1])),this.template&&this.render()},o.controller[t].trigger("ready")}return o.controller[t]},t.getService=function(t){if(!o.service[t]){if(!i.service[t])throw new Error('Service "'+t+'" not found');var n=i.service[t];o.service[t]=new function(){n[0].apply(this,e(n[1]))}}return o.service[t]},t.getConfig=function(e){return i.config[e]},this.removeClassFromElements=function(e,t){var n=document.getElementsByClassName(t);[].forEach.call(n,function(t){t.classList.remove(e)})},t.changeLocaleMethod=function(e){e.scripting=!0,t.getService("chat").changeLocale(e)}}function Controller(e,t,n){var i,o={};this.template="",this.scope={},this.handler=n.add,this.setHtmlElement=function(e){i=e},this.getHtmlElement=function(){return i},this.show=function(){"none"===i.style.display&&(i.style.display="",this.trigger("show"))},this.hide=function(){"none"!==i.style.display&&(i.style.display="none",this.trigger("hide"))},this.render=function(){this.setHtmlElement(t.makeElement(e.fetch(this.template,this.scope)))},this.on=function(e,t){o[e]=t},this.off=function(e){delete o[e]},this.trigger=function(e){o[e]&&o[e]()}}function YHelperChat(e){this.show=function(){ChatWidget.show()},this.hide=function(){ChatWidget.hide()},this.on=function(e,t){ChatWidget.on(e,t)},this.off=function(e){ChatWidget.off(e)},this.trigger=function(e){ChatWidget.trigger(e)};var t={project_id:e.project_id,user_id:e.user_id,signature:e.signature};ChatWidget.init(e.widget_id,e.user_id,t,e.settings,e.user_info)}var Light=function(e,t){return new Light.core.init(e,t)},$=Light;Light.core=Light.prototype={init:function(e,t){var n;if(e=e||window,t=t||document,n="string"==typeof e?Light.selector(e,t):n=e,this.els=[],void 0!==n.length)for(var i=0,o=n.length;i<o;i++)this.els.push(n[i]);else this.els.push(n);return this},get:function(e){return void 0===e?this.els:this.els[e]},count:function(){return this.els.length},each:function(e){for(var t=0,n=this.els.length;t<n;t++)e.call(this,this.els[t]);return this},attr:function(e,t,n){return this.each(function(i){void 0===n?i[e]=t:i[n][e]=t}),this},css:function(e){var t=this;return this.each(function(n){for(var i in e)t.attr(i,e[i],"style")}),this},addClass:function(e){return this.each(function(t){t.className+=" "+e}),this},removeClass:function(e){return this.each(function(t){t.className=t.className.replace(e,"")}),this},on:function(e,t){return this.each(function(n){!function(n){window.addEventListener?n.addEventListener(e,t,!1):window.attachEvent&&n.attachEvent("on"+e,function(){t.call(n,window.event)})}(n)}),this},ready:function(e){return DOMReady.add(e),this},remove:function(){return this.each(function(e){e.parentNode.removeChild(e)}),this}},Light.selector=function(e,t){for(var n,i,o,r=e.split(","),s=0;s<r.length;s++){var a=r[s].replace(/ /g,"");"string"==typeof a&&(i=a.substr(0,1),o=a.substr(1),n="#"==i?isDescendant(n=document.getElementById(o),t)?n:null:"."==i?getElementsByClassName(o,t):t.getElementsByTagName(a))}return n},Light.core.init.prototype=Light.core;var DOMReady=function(){var fns=[],isReady=!1,ready=function(){isReady=!0;for(var e=0;e<fns.length;e++)fns[e].call()};return this.add=function(fn){if(fn.constructor==String){var strFunc=fn;fn=function(){eval(strFunc)}}isReady?fn.call():fns[fns.length]=fn},window.addEventListener&&document.addEventListener("DOMContentLoaded",function(){ready()},!1),function(){if(!("querySelector"in document&&"localStorage"in window&&"addEventListener"in window&&"matchMedia"in window)){if(!document.uniqueID&&document.expando)return;var e=document.createElement("document:ready");try{e.doScroll?(e.doScroll("left"),ready()):setTimeout(arguments.callee,0)}catch(e){setTimeout(arguments.callee,0)}}}(),this}();Light.ready=DOMReady.add,function(){function e(e){return function(t,n,i,o){n=b(n,o,4);var r=!T(t)&&y.keys(t),s=(r||t).length,a=e>0?0:s-1;return arguments.length<3&&(i=t[r?r[a]:a],a+=e),function(t,n,i,o,r,s){for(;r>=0&&s>r;r+=e){var a=o?o[r]:r;i=n(i,t[a],a,t)}return i}(t,n,i,r,a,s)}}function t(e){return function(t,n,i){n=_(n,i);for(var o=E(t),r=e>0?0:o-1;r>=0&&o>r;r+=e)if(n(t[r],r,t))return r;return-1}}function n(e,t,n){return function(i,o,r){var s=0,a=E(i);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,o),i[r]===o?r:-1;if(o!=o)return(r=t(u.call(i,s,a),y.isNaN))>=0?r+s:-1;for(r=e>0?s:a-1;r>=0&&a>r;r+=e)if(i[r]===o)return r;return-1}}function i(e,t){var n=B.length,i=e.constructor,o=y.isFunction(i)&&i.prototype||a,r="constructor";for(y.has(e,r)&&!y.contains(t,r)&&t.push(r);n--;)(r=B[n])in e&&e[r]!==o[r]&&!y.contains(t,r)&&t.push(r)}var o=this,r=o._,s=Array.prototype,a=Object.prototype,c=Function.prototype,l=s.push,u=s.slice,h=a.toString,d=a.hasOwnProperty,f=Array.isArray,p=Object.keys,m=c.bind,g=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):o._=y,y.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}},_=function(e,t,n){return null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return _(e,t,1/0)};var w=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var o=1;i>o;o++)for(var r=arguments[o],s=e(r),a=s.length,c=0;a>c;c++){var l=s[c];t&&void 0!==n[l]||(n[l]=r[l])}return n}},k=function(e){if(!y.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},x=Math.pow(2,53)-1,E=S("length"),T=function(e){var t=E(e);return"number"==typeof t&&t>=0&&x>=t};y.each=y.forEach=function(e,t,n){t=b(t,n);var i,o;if(T(e))for(i=0,o=e.length;o>i;i++)t(e[i],i,e);else{var r=y.keys(e);for(i=0,o=r.length;o>i;i++)t(e[r[i]],r[i],e)}return e},y.map=y.collect=function(e,t,n){t=_(t,n);for(var i=!T(e)&&y.keys(e),o=(i||e).length,r=Array(o),s=0;o>s;s++){var a=i?i[s]:s;r[s]=t(e[a],a,e)}return r},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var i;return void 0!==(i=T(e)?y.findIndex(e,t,n):y.findKey(e,t,n))&&-1!==i?e[i]:void 0},y.filter=y.select=function(e,t,n){var i=[];return t=_(t,n),y.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(_(t)),n)},y.every=y.all=function(e,t,n){t=_(t,n);for(var i=!T(e)&&y.keys(e),o=(i||e).length,r=0;o>r;r++){var s=i?i[r]:r;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=_(t,n);for(var i=!T(e)&&y.keys(e),o=(i||e).length,r=0;o>r;r++){var s=i?i[r]:r;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return T(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=u.call(arguments,2),i=y.isFunction(t);return y.map(e,function(e){var o=i?t:e[t];return null==o?o:o.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,o,r=-1/0,s=-1/0;if(null==t&&null!=e)for(var a=0,c=(e=T(e)?e:y.values(e)).length;c>a;a++)(i=e[a])>r&&(r=i);else t=_(t,n),y.each(e,function(e,n,i){((o=t(e,n,i))>s||o===-1/0&&r===-1/0)&&(r=e,s=o)});return r},y.min=function(e,t,n){var i,o,r=1/0,s=1/0;if(null==t&&null!=e)for(var a=0,c=(e=T(e)?e:y.values(e)).length;c>a;a++)i=e[a],r>i&&(r=i);else t=_(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(s>o||1/0===o&&1/0===r)&&(r=e,s=o)});return r},y.shuffle=function(e){for(var t,n=T(e)?e:y.values(e),i=n.length,o=Array(i),r=0;i>r;r++)(t=y.random(0,r))!==r&&(o[r]=o[t]),o[t]=n[r];return o},y.sample=function(e,t,n){return null==t||n?(T(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=_(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,i){var o={};return n=_(n,i),y.each(t,function(i,r){var s=n(i,r,t);e(o,i,s)}),o}};y.groupBy=C(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=C(function(e,t,n){e[n]=t}),y.countBy=C(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?u.call(e):T(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:T(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=_(t,n);var i=[],o=[];return y.each(e,function(e,n,r){(t(e,n,r)?i:o).push(e)}),[i,o]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var A=function(e,t,n,i){for(var o=[],r=0,s=i||0,a=E(e);a>s;s++){var c=e[s];if(T(c)&&(y.isArray(c)||y.isArguments(c))){t||(c=A(c,t,n));var l=0,u=c.length;for(o.length+=u;u>l;)o[r++]=c[l++]}else n||(o[r++]=c)}return o};y.flatten=function(e,t){return A(e,t,!1)},y.without=function(e){return y.difference(e,u.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=_(n,i));for(var o=[],r=[],s=0,a=E(e);a>s;s++){var c=e[s],l=n?n(c,s,e):c;t?(s&&r===l||o.push(c),r=l):n?y.contains(r,l)||(r.push(l),o.push(c)):y.contains(o,c)||o.push(c)}return o},y.union=function(){return y.uniq(A(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=E(e);o>i;i++){var r=e[i];if(!y.contains(t,r)){for(var s=1;n>s&&y.contains(arguments[s],r);s++);s===n&&t.push(r)}}return t},y.difference=function(e){var t=A(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,E).length||0,n=Array(t),i=0;t>i;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,o=E(e);o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,i){for(var o=(n=_(n,i,1))(t),r=0,s=E(e);s>r;){var a=Math.floor((r+s)/2);n(e[a])<o?r=a+1:s=a}return r},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;i>r;r++,e+=n)o[r]=e;return o};var I=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=k(e.prototype),s=e.apply(r,o);return y.isObject(s)?s:r};y.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return I(e,i,t,this,n.concat(u.call(arguments)))};return i},y.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,o=t.length,r=Array(o),s=0;o>s;s++)r[s]=t[s]===y?arguments[i++]:t[s];for(;i<arguments.length;)r.push(arguments[i++]);return I(e,n,this,this,r)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return y.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n},y.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,o,r,s=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:y.now(),s=null,r=e.apply(i,o),s||(i=o=null)};return function(){var l=y.now();a||!1!==n.leading||(a=l);var u=t-(l-a);return i=this,o=arguments,0>=u||u>t?(s&&(clearTimeout(s),s=null),a=l,r=e.apply(i,o),s||(i=o=null)):s||!1===n.trailing||(s=setTimeout(c,u)),r}},y.debounce=function(e,t,n){var i,o,r,s,a,c=function(){var l=y.now()-s;t>l&&l>=0?i=setTimeout(c,t-l):(i=null,n||(a=e.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=y.now();var l=n&&!i;return i||(i=setTimeout(c,t)),l&&(a=e.apply(r,o),r=o=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return N&&i(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return N&&i(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=e[t[o]];return i},y.mapObject=function(e,t,n){t=_(t,n);for(var i,o=y.keys(e),r=o.length,s={},a=0;r>a;a++)i=o[a],s[i]=t(e[i],i,e);return s},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=[t[o],e[t[o]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,o=n.length;o>i;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(e,t,n){t=_(t,n);for(var i,o=y.keys(e),r=0,s=o.length;s>r;r++)if(i=o[r],t(e[i],i,e))return i},y.pick=function(e,t,n){var i,o,r={},s=e;if(null==s)return r;y.isFunction(t)?(o=y.allKeys(s),i=b(t,n)):(o=A(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var a=0,c=o.length;c>a;a++){var l=o[a],u=s[l];i(u,l,s)&&(r[l]=u)}return r},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(A(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=w(y.allKeys,!0),y.create=function(e,t){var n=k(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;i>r;r++){var s=n[r];if(t[s]!==o[s]||!(s in o))return!1}return!0};var F=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=h.call(e);if(o!==h.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),r){if((c=e.length)!==t.length)return!1;for(;c--;)if(!F(e[c],t[c],n,i))return!1}else{var l,u=y.keys(e);if(c=u.length,y.keys(t).length!==c)return!1;for(;c--;)if(l=u[c],!y.has(t,l)||!F(e[l],t[l],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(e,t){return F(e,t)},y.isEmpty=function(e){return null==e||(T(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=f||function(e){return"[object Array]"===h.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&d.call(e,t)},y.noConflict=function(){return o._=r,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=S,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=b(t,n,1);for(var o=0;e>o;o++)i[o]=t(o);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=y.invert(O),L=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};y.escape=L(O),y.unescape=L(q),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var j=0;y.uniqueId=function(e){var t=++j+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,P=function(e){return"\\"+D[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||R).source,(t.interpolate||R).source,(t.evaluate||R).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(i,function(t,n,i,s,a){return r+=e.slice(o,a).replace(H,P),o=a+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var a=function(e){return s.call(this,e,y)},c=t.variable||"obj";return a.source="function("+c+"){\n"+r+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var M=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),M(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],M(this,n)}}),y.each(["concat","join","slice"],function(e){var t=s[e];y.prototype[e]=function(){return M(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this);var JSFrame=window.JSFrame=new Core;JSFrame.service("cookieStorage",function(){this.get=function(e){e="JSFrame."+e;var t=new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"),n=document.cookie.match(t);return n?JSON.parse(decodeURIComponent(n[1])):void 0},this.set=function(e,t,n){e="JSFrame."+e;var i=(n=n||{}).expires;if("number"==typeof i&&i){var o=new Date;o.setTime(o.getTime()+1e3*i),i=n.expires=o}i&&i.toUTCString&&(n.expires=i.toUTCString());var r=e+"="+encodeURIComponent(JSON.stringify(t));for(var s in n){r+="; "+s;var a=n[s];!0!==a&&(r+="="+a)}document.cookie=r},this.remove=function(e){this.set(e,null,{expires:"Thu, 01 Jan 1970 00:00:01 GMT",path:"/"})}}),JSFrame.service("sessionStorage",function(){this.get=function(e){var t=window.sessionStorage.getItem("JSFrame."+e);return t?JSON.parse(t):void 0},this.set=function(e,t){window.sessionStorage.setItem("JSFrame."+e,JSON.stringify(t))},this.remove=function(e){window.sessionStorage.removeItem("JSFrame."+e)}}),JSFrame.service("localStorage",function(){this.get=function(e){var t=window.localStorage.getItem("JSFrame."+e);return t?JSON.parse(t):void 0},this.set=function(e,t){window.localStorage.setItem("JSFrame."+e,JSON.stringify(t))},this.remove=function(e){window.localStorage.removeItem("JSFrame."+e)}}),JSFrame.service("memoryStorage",function(){var e={};this.get=function(t){return e["JSFrame."+t]},this.set=function(t,n){e["JSFrame."+t]=n},this.remove=function(t){delete e["JSFrame."+t]}}),function(){var e=this;e.checkStorageAccess=function(){try{if(!window.localStorage||!window.sessionStorage)throw"exception";localStorage.setItem("storage_test",1),localStorage.removeItem("storage_test")}catch(t){e.createCookieStorage()}},e.createCookieStorage=function(){var e=function(e){function t(e,t,n){var i,o;n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()):o="",document.cookie=e+"="+t+o+"; path=/"}function n(e){var t,n,i=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t++){for(n=o[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(i))return n.substring(i.length,n.length)}return null}function i(n){n=encodeURIComponent(JSON.stringify(n)),"session"==e?t(o(),n,365):t("localStorage",n,365)}function o(){return window.name||(window.name=(new Date).getTime()),"sessionStorage"+window.name}var r=function(){var t=n("session"==e?o():"localStorage");return t?JSON.parse(decodeURIComponent(t)):{}}();return{length:0,clear:function(){r={},this.length=0,"session"==e?t(o(),"",365):t("localStorage","",365)},getItem:function(e){return void 0===r[e]?null:r[e]},key:function(e){var t=0;for(var n in r){if(t==e)return n;t++}return null},removeItem:function(e){delete r[e],this.length--,i(r)},setItem:function(e,t){r[e]=t+"",this.length++,i(r)}}},t=new e("local"),n=new e("session");window.localStorage=t,window.sessionStorage=n,window.localStorage&&void 0!==window.localStorage.prototype?(window.localStorage.prototype=t,window.sessionStorage.prototype=n):window.localStorage&&void 0!==window.localStorage.__proto__&&(window.localStorage.__proto__=t,window.sessionStorage.__proto__=n)},e.checkStorageAccess()}(),JSFrame.service("router",function(e){var t=function(){};this.go=function(n,i){e.set("router.current",[n,i]),t(n,i)},this.is=function(t,n){var i=e.get("router.current");if(!i)return!1;if(t!==i[0]||n&&!i[1])return!1;if(n&&i[1])for(var o in n)if(n[o]!=i[1][o])return!1;return!0},this.getCurrent=function(){return e.get("router.current")},this.getName=function(){var e=this.getCurrent();return e?e[0]:void 0},this.getParams=function(){var e=this.getCurrent();return e&&e[1]?e[1]:{}},this.onChange=function(e){t=e}},["memoryStorage"]),JSFrame.service("template",function(e,t,n,i,o){function r(e){return s.push(e),'<span id="controller-'+(s.length-1)+'"></span>'}var s=[];this.render=function(e,n,i){var o=t.makeElement(this.fetch(e,n));return t.html(i,o),o},this.fetch=function(t,s){(s=s||{}).config||(s.config=function(e){return-1!=="host".indexOf(e)?JSFrame.windowProtocol+"//"+i[e]:i[e]}),s.controller||(s.controller=r),s.translate||(s.translate=n.translate),s.handler||(s.handler=o.make);for(var a=t.split("."),c=e[a[0]],l=1;l<a.length;l++)c=c[a[l]];return _.template(c)(s)},this.initAll=function(){for(var e=0;e<s.length;e++)t.replaceWith(t.get("#controller-"+e),JSFrame.getController(s[e]).getHtmlElement())}},["views","dom","localization","config","handler"]),JSFrame.service("dom",function(e){var t=document.body;this.setParentElement=function(e){t=e},this.get=function(e,n){return(n=n||t).querySelector(e)},this.getAll=function(e,n){return(n=n||t).querySelectorAll(e)},this.html=function(e,t){e.innerHTML="",this.append(e,t)},this.append=function(e,t){e.appendChild(this.makeElement(t))},this.after=function(e,t){e&&(e.nextSibling?e.parentNode.insertBefore(this.makeElement(t),e.nextSibling):this.append(e.parentNode,this.makeElement(t)))},this.replaceWith=function(e,t){e&&(this.after(e,t),this.remove(e))},this.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},this.makeElement=function(e){if("string"==typeof e){var t=document.createElement("div");for(t.innerHTML=e;t.firstChild;)return t.firstChild}return e},this.on=function(e,t,n){e.addEventListener(t,n)},this.loadCss=function(t,n){var i=!1,o=document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",t),o.onload=function(){i||(i=!0,n&&n())},o.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,n&&n())},document.head.appendChild(o),e.mobile&&!i&&(i=!0,n&&n())}},["jscd"]),JSFrame.service("localization",function(e,t,n){this.translate=function(i,o){var r=t.language.toLowerCase();return e[r]&&e[r][i]?e[r][i].replace(/\{([a-zA-Z0-9_]+)\}/g,function(e,t){return o[t]}):("ru"!=r&&n.emit("client:log",{error:"Phrase is missing (localization)",language:r,text:i}),i)}},["locales","settings","socketIO"]),JSFrame.service("jscd",function(){var e=this;e.init=function(){var t="";screen.width&&(t+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var n=0,i=0;"number"==typeof window.innerWidth?(n=window.innerWidth,i=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(n=document.documentElement.clientWidth,i=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(n=document.body.clientWidth,i=document.body.clientHeight);var o=navigator.appVersion,r=(new UAParser).getResult(),s=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(o),a=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||a||(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")),e.screen=t,e.width=n,e.height=i,e.mobile=s,e.cookies=a,e.oldMSIE=!1,r&&(e.userAgent=r.ua,e.deviceVendor=r.device?r.device.vendor:null,e.deviceModel=r.device?r.device.model:null,e.deviceType=r.device?r.device.type:null,e.browserVersion=r.browser?r.browser.version:null,e.osVersion=r.os?r.os.version:null,e.browser=r.browser?r.browser.name:null,e.os=r.os?r.os.name:null)},e.init()}),JSFrame.service("handler",function(){this.add=function(e,t){JSFrame.handlers[e]=t},this.make=function(e){return"JSFrame.handlers['"+e+"'](this, event)"}}),JSFrame.service("settings",function(e,t,n){var i=this,o=e.get("settings")||{};i.version="",i.debug=n.debug||!1,i.sound="",i.button={appearance:"",position:"",layout:"",hide:!1,no:!1},i.block={appearance:"",position:""},i.text={offline:"",online:"",waiting:"",seller:"",complete:""},i.theme="",i.language="",i.text_disconnect_event="",i.support_email="",i.status="",i.position=o.position||function(){var e=JSFrame.block,n=e&&e.style.width?parseInt(e.style.width):302,o=e&&e.style.height?parseInt(e.style.height):462,r=Math.round((t.width-n)/2),s=Math.round((t.height-o)/2),a={"top-left":"left: 10px; top: 10px;","top-center":"left: "+r+"px; top: 10px;","top-right":"right: 10px; top: 10px;","bottom-left":"left: 10px; bottom: 10px;","bottom-center":"left: "+r+"px; bottom: 10px;","bottom-right":"right: 10px; bottom: 10px;","left-top":"left: 10px; top: 10px;","left-center":"left: 10px; top: "+s+"px;","left-bottom":"left: 10px; bottom: 10px;","right-top":"right: 10px; top: 10px;","right-center":"right: 10px; top: "+s+"px;","right-bottom":"right: 10px; bottom: 10px;"};return a[i.block.appearance+"-"+i.block.position]||a["right-bottom"]}(),i.mute=o.mute||!1,i.timing={},i.highload_template="",i.set=function(t,n){this[t]=n,-1!==["position","version","mute"].indexOf(t)&&(o[t]=n,e.set("settings",o))}},["localStorage","jscd","config"]),JSFrame.service("draggable",function(e){var t=this;this.init=function(n,i,o){t.block=n,t.callback=o;var r={},s={},a=!1;"Opera"===e.browser&&(n.style.position="fixed"),i.ondragstart=function(){return!1},i.onselectstart=function(){return!1},document.onmousemove=function(e){var n=e||window.event;r.x=n.clientX,r.y=n.clientY,a&&function(){var e=r.x-s.x,n=r.y-s.y;e=t.calcLogic(e,s.maxX),n=t.calcLogic(n,s.maxY),t.setStyles(e,n),t.removeSelection()}()},document.onmouseup=function(){a=!1},window.onresize=function(){if(window.getComputedStyle){var e=window.getComputedStyle(n,null),i=e.left,o=e.top,r=e.width,s=e.height,a=e.left?parseFloat(i):0,c=e.top?parseFloat(o):0,l=e.width?parseFloat(r):0,u=e.height?parseFloat(s):0,h=t.getScreenRect(),d=h.width-l,f=h.height-u;a=t.calcLogic(a,d),c=t.calcLogic(c,f),t.setStyles(a,c)}},i.onmousedown=function(){a=!0,s.x=r.x-n.offsetLeft,s.y=r.y-n.offsetTop;var e=n.getBoundingClientRect(),i=t.getScreenRect();s.maxX=i.width-e.width,s.maxY=i.height-e.height}},this.setStyles=function(e,n){t.block&&(t.block.style.left=e+"px",t.block.style.top=n+"px"),t.callback&&t.callback({left:e,top:n})},this.calcLogic=function(e,t){return t<=e&&(e=t),e<0&&(e=0),e},this.removeSelection=function(){window.getSelection&&window.getSelection().removeAllRanges()},this.getScreenRect=function(){return{width:window.innerWidth,height:window.innerHeight}},this.setDefaultPosition=function(){if(t.block){var e=t.block.getBoundingClientRect(),n=t.getScreenRect(),i=n.width-(e.width+15),o=n.height-(e.height+15),r=t.calcLogic(1/0,i),s=t.calcLogic(1/0,o);t.setStyles(r,s)}}},["jscd"]),JSFrame.service("resizable",function(e,t){var n=this;n.init=function(){window.addEventListener("orientationchange",n.resize),window.addEventListener("resize",n.resize)},n.resize=function(){e.init();var n=JSFrame.getController("block").getHtmlElement();n&&(n.style.top=0,n.style.left=0,n.style.width=e.width-2+"px",n.style.height=e.height-2+"px",t.get(".sh_textarea_field").style.width="100%",t.get("#sh_messages").style.height=e.height-175+"px",t.get(".sh_chat_end").style.height=e.height+"px",t.get(".sh_online_box").style.height=e.height+"px")}},["jscd","dom"]),JSFrame.service("chat",function(e,t,n,i,o,r,s,a,c,l,u,h){var d=this,f=!1,p=!1;d.online=!1,d.isWaiting=!0,d.hasQueue=!1,d.hasNotice=!1,d.isFinished=!0,d.data={},d.chatLocales={},d.historyId=0,d.mark=0,d.historyData=[],d.scripts={},d.userInfo={},d.skipQueueCloseEvent=!1,d.operatorName="Operator",d.emptyChat=!1,d.closedByRobot=!1,d.init=function(m,g,v,y){function b(e,t){if(t=void 0!==t&&t,d.isFinished=!0,d.skipQueueCloseEvent=!1,c.trigger("chatFinished"),e&&1===e.robot)c.trigger("chatClosed"),c.trigger("domReInit"),d.data={},d.closedByRobot=!0,i.go("button");else{d.data.status_id=h.chatStatus.STATUS_FINISHED;var n={action:"finish",noback:!0};t&&(n.action="close_offline"),i.go("block",n)}}if(v&&(d.userInfo=v),y)for(var _ in y)switch(_){case"host":s.host=y[_],s.node_host=s.node_host_prefix+y[_];break;case"locale":d.userInfo.locale=y[_]}e.connect(m,g,d.userInfo),e.on("connected",function(t){t&&(d.userInfo=t),f||(e.emit("client:widget.get",{widget_id:m,locale:y&&y.locale?y.locale:null}),e.emit("client:metrics.get",{projectId:d.userInfo.project_id,userType:d.userInfo.user_type,mobile:u.mobile})),c.trigger("connect"),f=!0}),e.on("disconnect",function(){if(d.data.status_id<h.chatStatus.STATUS_FINISHED){var e={chat_id:d.data.chat_id,client:{client_id:0,name:"SERVICE MESSAGE",photo:s.system_img,user_type:2},client_id:0,delivered:1,message_id:0,timestamp:new Date,type_id:0,service:!0,text:o.text_disconnect_event.replace(/\{operator_name\}/g,d.operatorName)||"Connection error.",support_email:o.support_email};c.trigger("messageReceived",e),l.play()}}),e.on("main:user.data",function(e){d.setUserInfo(e)}),e.on("client:widget.init",function(t){d.online=t.online,c.trigger("changeStatus"),d.online&&(d.hasQueue=t.queue,c.trigger("changeStatusQueue"));for(var n in o)void 0!==t.settings[n]&&(o[n]=t.settings[n]);if(c.trigger("settingsUpdated"),y)for(var n in y)switch(n){case"side_appearance":o.button.appearance=y[n];break;case"side_position":o.button.position=y[n];break;case"header_layout":o.button.layout=y[n];break;case"hide_button":o.button.hide=y[n];break;case"side_block_appearance":o.block.appearance=y[n];break;case"side_block_position":o.block.position=y[n];break;case"header_online":o.text.online=y[n];break;case"header_offline":o.text.offline=y[n];break;case"text_seller":o.text.seller=y[n];break;case"text_waiting":o.text.waiting=y[n];break;case"text_client_complete":o.text.complete=y[n];break;case"theme":o.theme=y[n]}u.mobile&&!s.mobile_button_show&&(o.button.hide=!0),r.loadCss(JSFrame.windowProtocol+"//"+s.host+"/css/theme/"+(o.theme||"dark")+".css",function(){t.action&&JSFrame.reInit(),d.chatLocales=t.settings.locales,r.append(document.body,JSFrame.getController("button").getHtmlElement());var n=JSFrame.getController("block").getHtmlElement();r.append(document.body,n),r.setParentElement(n),a.initAll(),JSFrame.run(),"client:change.locale"===t.action&&(p||(d.online?i.go("block",{action:"auth"}):i.go("block",{action:"offline"})),p=!1,c.trigger("localeChangedByUser",{localeId:t.settings.locale_id}),d.userInfo.locale_id=t.settings.locale_id),"opened"===o.status&&i.go("block",{action:"online"}),c.trigger("renderLocalesChangeBlock",d.chatLocales),e.emit("client:widget.scripts")})}),e.on("client:metrics.init",function(e){if(e.analScript){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.type="text/javascript",n.textContent=e.analScript||"console.log('metrics scripts undefined!');",t.parentNode.insertBefore(n,t)}}),e.on("client:chat.online",function(e){d.online=e,c.trigger("changeStatus")}),e.on("client:chat.queue",function(e){d.hasQueue=e,c.trigger("changeStatusQueue")}),e.on("client:chat.init",function(t){var n=0===Object.keys(d.data).length;d.data=t,d.historyId=d.data.chat_id,d.isFinished=!1,t.messages&&t.messages.length&&t.messages.forEach(function(t){2==t.client.user_type&&0==t.delivered&&e.emit("client:chat.delivered",t.message_id)}),n&&c.trigger("chatUpdated"),d.skipQueueCloseEvent&&d.queueEvent(h.eventDialog.SELECT_CHAT),i.go("block",{action:"online"}),"push"===t.open_type&&l.play(),c.trigger("setTimeoutNotice",{a:1})}),e.on("client:chat.toprocess",function(t){c.trigger("clearNoticeTimer"),d.isWaiting=!1,JSFrame.getController("wait").hide(),JSFrame.getController("notice").hide(),JSFrame.getController("online").show(),c.trigger("messageReceived",t),d.data.status_id=h.chatStatus.STATUS_INPROCESS,l.play(),e.emit("client:chat.delivered",t.message_id),c.trigger("changeStatus"),d.hasNotice=!1,JSFrame.removeClassFromElements("active","tablinks"),document.querySelector("#chatButton").classList.add("active")}),e.on("client:chat.message",function(t){c.trigger("messageReceived",t),d.data.messages.push(t),2==t.client.user_type&&(d.operatorName=t.client.name,l.play(),e.emit("client:chat.delivered",t.message_id))}),e.on("client:chat.form",function(e){c.trigger("formReceived",e)}),e.on("client:stop",function(){e.disconnect()}),e.on("storage",function(e){for(var i=0;i<e.length;i++)"sessionid"===e[i].name&&(e[i].name+="-"+m),"local"===e[i].type?n.set(e[i].name,e[i].value):t.set(e[i].name,e[i].value)}),e.on("client:chat.push",function(t){d.start(t.operator,1),e.emit("client:chat.delivered",t.message_id)}),e.on("client:chat.deferred",function(){d.start()}),e.on("operator:yh.system.close",function(e){var t=null;e.chat.forEach(function(e){+e===d.data.chat_id&&(t=e)}),t&&b(e,!0)}),e.on("client:chat.finish",b),e.on("client:chat.close",function(){d.isFinished=!0,d.isWaiting=!0,d.data.chat_id>0&&i.go("button")}),e.on("client:chat.history",function(e){e.chat_id&&(d.historyId=e.chat_id,d.historyData.unshift(e),c.trigger("historyAdded"))}),e.on("client:chat.attach",function(e){s.debug&&console.info("Attache was saved: "+e)}),e.on("client:chat.updateMessage",function(e){c.trigger("messageUpdated",e)}),e.on("client:widget.scripts",function(e){for(var t in e)e[t].showed=!1;d.scripts=e,JSFrame.getService("scripts").run()})},d.start=function(t,i,o){e.emit("client:chat.get",{operator:t,type_id:i||0,name:n.get("user-name"),script_id:o})},d.autoRequest=function(t){e.emit("client:chat.auto",{script_id:t})},d.refuseRequest=function(t){e.emit("client:chat.refuse",{script_id:t})},d.send=function(t,n){var i={text:t};n&&(i.form=n),e.emit("client:chat.message",i),d.data&&d.data.client_message_count++},d.preview=function(t){e.emit("client:chat.preview",{text:t})},d.YHChatFinish=function(t){d.data&&!d.data.chat_id||(e.emit("client:chat.finish",{email:t,mark:d.mark}),d.mark=0,JSFrame.rating.setRating(0),d.queueEvent(h.eventDialog.CLOSE_NOANSWER),c.trigger("chatClosed"),c.trigger("domReInit"),c.trigger("clearNoticeTimer"),d.data={})},d.history=function(){e.emit("client:chat.history",{chat_id:d.historyId})},d.request=function(t){e.emit("client:chat.request",{contacts:t})},d.queueEvent=function(t){e.emit("client:chat.queueEvent",{name:n.get("user-name"),event:t,chat_id:d.data.chat_id||""})},d.inviteOperator=function(){e.emit("client:chat.inviteOperator",{locale_id:d.userInfo.locale_id})},d.log=function(t){e.emit("client:log",t)},d.changeLocale=function(t){var n=r.get("#sh_button",document.body);n&&r.remove(n),(n=r.get("div.shc.sh_chat",document.body))&&r.remove(n),i.go("button"),d.data={},p=!!t.scripting,e.emit("client:change.locale",t)},d.isHideStars=function(){return!d.data||!d.data.client_message_count||d.closedByRobot},d.setUserInfo=function(e){e&&(d.userInfo=e)},d.setHasQueue=function(e){d.hasQueue=e}},["socketIO","sessionStorage","localStorage","router","settings","dom","config","template","event","audio","jscd","constants"]),JSFrame.service("event",function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},this.off=function(t){delete e[t]},this.trigger=function(t,n){if(e[t])for(var i=0;i<e[t].length;i++)e[t][i].call(window,n)}}),JSFrame.service("func",function(){this.readableFileSize=function(e){for(var t=0;e>=1024;)e/=1024,++t;return e.toFixed(1)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},this.makeTime=function(e){var t=[],n=(e=new Date(e)).getHours();t.push(n<10?"0"+n:n);var i=e.getMinutes();t.push(i<10?"0"+i:i);var o=e.getSeconds();return t.push(o<10?"0"+o:o),t.join(":")},this.makeDate=function(e){var t=[],n=(e=new Date(e)).getDate();t.push(n<10?"0"+n:n);var i=e.getMonth()+1;return t.push(i<10?"0"+i:i),t.push(e.getFullYear()),t.join(".")},this.throttle=function(e,t,n){var i,o,r;return function(){o=arguments,r=!0,n=n||this,i||function(){r?(e.apply(n,o),r=!1,i=setTimeout(arguments.callee,t)):i=null}()}}}),JSFrame.service("audio",function(e,t,n){this.play=function(i){if(!e.mute&&!t.oldMSIE){var o=n.get("#sh_container_audio");o.currentTime=0,o.play()}}},["settings","jscd","dom"]),JSFrame.service("scripts",function(e,t,n,i,o,r,s,a,c){function l(e){var t=-1;if(Array.isArray(e.url_pattern)&&e.url_pattern.length){if(!e.url_pattern.some(function(e){return e&&-1!==window.location.href.indexOf(e)}))return t}if(2==e.balance_type&&i.userInfo.balance<e.balance)return t;if(3==e.balance_type&&i.userInfo.balance>e.balance)return t;if(e.demo_timeout>0&&!i.userInfo.is_demo_game)return t;if(e.last_invite_timeout>0){var o=n.get("lastcalltime")||0;if(o){t=(r=parseInt(o)+6e4*parseInt(e.last_invite_timeout))>t?r:t}else{t=(r=+new Date)>t?r:t}}if(e.visit_page_timeout>0){t=(r=f+1e3*parseInt(e.visit_page_timeout))>t?r:t}if(e.visit_site_timeout>0){t=(r=p+1e3*parseInt(e.visit_site_timeout))>t?r:t}if(e.after_auth_timeout>0&&i.userInfo.auth_date){t=(r=+new Date(i.userInfo.auth_date)+1e3*parseInt(e.after_auth_timeout))>t?r:t}if(e.demo_timeout>0&&i.userInfo.is_demo_game){var r=f+1e3*parseInt(e.demo_timeout);t=r>t?r:t}return-1===t&&(t=+new Date),t}function u(e,n,a){if(!t.get("#rh-arrow",document.body)&&!o.is("block")){i.autoRequest(n),t.append(document.body,r.fetch("push.block",{host:JSFrame.windowProtocol+"//"+s.host,text:a.request_text,yes_button:a.yes_button||c.translate(""),no_button:a.no_button||c.translate("")}));var l=t.get("#rh-arrow",document.body);t.get("#rh-choiceYes",l).onclick=function(){JSFrame.getController("button").getUserInfoBeforeOpen(function(){i.start(e,2,n),t.remove(l)})},t.get("#rh-choiceNo",l).onclick=function(){i.refuseRequest(n),t.remove(l)},t.get("#rh-choiceClose",l).onclick=function(){i.refuseRequest(n),t.remove(l)},a.popup_timeout&&setTimeout(function(){t.remove(l)},1e3*a.popup_timeout)}}var h,d=this,f=+new Date,p=parseInt(n.get("starttime"))||+new Date;d.run=function(){try{window.addEventListener("hashchange",d.init,!1),d.init()}catch(t){e.debug&&console.warn(t)}},d.init=function(){if(clearTimeout(h),!i.online)return!1;var e={};for(var t in i.scripts)if(!i.scripts[t].showed){var o=l(i.scripts[t]);-1!==o&&(e[t]=o)}var r,s;for(var t in e)(!s||e[t]<s)&&(r=t,s=e[t]);r&&i.scripts[r]&&(h=setTimeout(function(){n.set("lastcalltime",+new Date),i.scripts[r]&&function(e,t,n,i){n?(a.emit("client:chat.canOpenInvitation",{script_id:t}),a.on("client:chat.canOpenInvitation",function(n){n.solution&&u(e,t,i)})):u(e,t,i)}(null,r,i.scripts[r].is_smart_popup,i.scripts[r]),i.scripts[r].showed=!0},s-new Date))},a.on("client:chat.stopSmartPopUp",function(e){e.projectId&&e.projectId.length&&(-1!==e.projectId.indexOf(i.userInfo.project_id.toString())?i.scripts={}:Object.keys(i.scripts).length||a.emit("client:widget.scripts"))})},["settings","dom","sessionStorage","chat","router","template","config","socketIO","localization"]),JSFrame.service("starsService",function(e,t,n){this.stars={init:function(i,o){o=o||[{title:" ",description:t.text.marksText,rating:1}],function(){for(var t=0;t<o.length;t++)!function(t,n){var i=t.querySelector(".c-rating"),o=n.rating;JSFrame.rating=JSFrame.ratingInit(i,o,5,function(t){e.mark=t})}(function(e){var t=document.createElement("div"),o="",r=e.title?e.title:n.translate("  ");return o+=r?'<span class="c-item__title">'+r+"</span><br>":"",o+=e.description?'<p class="c-item__description">'+e.description+"</p>":"",o+='<ul class="c-rating"></ul>',t.classList.add("c-item"),t.innerHTML=o,i.appendChild(t),t}(o[t]),o[t])}()}}},["chat","settings","localization"]),JSFrame.service("faq",function(e,t,n){this.selectedTag={},this.selectedQuestion={},this.getData=function(e){t.emit("client:faq:init",e)},this.getDataByTag=function(e){t.emit("client:faq:searchFullText",e)},this.selectQuestion=function(e){t.emit("client:faq:select-question",e)},t.on("client:faq:init",function(e){n.trigger("faqInitReceived",e)}),t.on("client:faq:search",function(e){n.trigger("faqDocumentsByTagReceived",e)})},["constants","socketIO","event"]),JSFrame.service("notice",function(e,t,n,i,o){var r=["offline","faq"],s={firstFormTimerNoticeId:0,secondFormTimerNoticeId:0},a=function(){return(!i.data||i.data.status_id==e.chatStatus.STATUS_PENDING)&&(i.hasNotice=!0,-1===r.indexOf(n.getParams().action))},c=function(){a()&&(t.trigger("renderNoticeText",{field:"firstHighLoadText"}),n.go("block",{action:"notice"}))},l=function(){a()&&(t.trigger("renderNoticeText",{field:"secondHighLoadText"}),n.go("block",{action:"notice"}))};t.on("setTimeoutNotice",function(){if(i.data.status_id==e.chatStatus.STATUS_PENDING){var t=+new Date(i.data.start_time),n=+new Date,r=o.timing.firstFormHighLoad?1e3*o.timing.firstFormHighLoad:0,a=o.timing.secondFormHighLoad?1e3*o.timing.secondFormHighLoad:0;r&&n<t+r&&(s.firstFormTimerNoticeId=setTimeout(c,r)),a&&n<t+a&&(s.secondFormTimerNoticeId=setTimeout(l,a))}}),t.on("clearNoticeTimer",function(){clearTimeout(s.firstFormTimerNoticeId),clearTimeout(s.secondFormTimerNoticeId)})},["constants","event","router","chat","settings"]),JSFrame.service("socketIO",function(e,t,n,i,o,r,s){var a,c=!1;this.connect=function(r,s,l){var u=i.oldMSIE?{}:{transports:["websocket","polling"]},h=e.get("transport");h&&u.transports.length&&(u.transports.splice(u.transports.indexOf(h),1),u.transports.unshift(h)),u.onCreateTransport=function(e){h=e},(a=io(JSFrame.windowProtocol+"//"+n.node_host+"/clients",u)).on("connect",function(){o.debug&&console.info("ON:","connect"),!c&&h&&"websocket"!==h&&(o.debug&&console.info("Set transport: "+h),e.set("transport",h));var n=!!t.get("newVisitor");n?n=!1:(n=!0,t.set("newVisitor",1)),c=!0;var u={session_id:t.get("sessionid-"+r),widget_id:r,current_page:window.location.href,navigator:i,new_visitor:n,user_info:l};"string"==typeof s?u.token=s:"object"==typeof s&&null!==s&&(u.project_id=s.project_id,u.user_id=s.user_id,u.signature=s.signature),a.emit("client:connect.info",u),o.debug&&console.info("SEND:",u)}),a.on("main:error",function(e){o.debug&&console.warn("ERROR:",e)})},this.uploaderInit=function(e){var t=new SocketIOFileUpload(a);t.maxFileSize=5242880,t.listenOnInput(e),t.addEventListener("error",function(e){if(1===e.code){var t={client:{client_id:0,name:"SERVICE MESSAGE",photo:n.system_img,user_type:2},client_id:0,delivered:1,message_id:0,timestamp:new Date,type_id:0,service:!0,text:"This file exceeds the maximum file size (5Mb)",support_email:o.support_email};r.trigger("messageReceived",t),s.play()}})},this.on=function(e,t){a.on(e,function(n){o.debug&&console.info("ON:",e,n),t(n)})},this.emit=function(e,t){o.debug&&console.info("EMIT:",e,t),a.emit(e,t)},this.disconnect=function(){a.disconnect()}},["sessionStorage","localStorage","config","jscd","settings","event","audio"]),JSFrame.controller("block",function(e,t,n,i,o,r,s,a,c,l,u){function h(){var e=c.online?i.text.online:i.text.offline;t.get(".sh_title",d.getHtmlElement()).innerHTML=e}var d=this;d.template="chat.block",d.scope.sound=i.sound||"ChatIncomingInitial",d.scope.position=i.position,d.scope.title=c.online?i.text.online:i.text.offline,d.handler("block.hide",function(){JSFrame.removeClassFromElements("active","tablinks"),s.go("button"),l.trigger("domReInit")}),d.handler("block.faq",function(e){JSFrame.removeClassFromElements("active","tablinks"),e.classList.add("active"),s.go("block",{action:"faq"});document.getElementById("sh_container").classList.add("sh_scroll_height")}),d.handler("block.chat",function(e){JSFrame.removeClassFromElements("active","tablinks"),e.classList.add("active");document.getElementById("sh_container").classList.remove("sh_scroll_height"),c.online||!0!==c.isFinished?!0===c.hasNotice?(c.hasNotice=!1,s.go("block",{action:"notice"})):c.data&&-1!=[0,1,2].indexOf(c.data.status_id)?s.go("block",{action:"online"}):c.hasQueue?(c.YHChatFinish(),s.go("block",{action:"queue"})):(c.YHChatFinish(),s.go("block",{action:"auth"})):s.go("block",{action:"offline"})}),d.handler("block.close",function(){JSFrame.removeClassFromElements("active","tablinks");var e=t.get("#chatButton",d.getHtmlElement());if(e&&e.classList.add("active"),c.data.chat_id>0)if(c.data.status_id==u.chatStatus.STATUS_DEFERRED){var n=t.get("#sh_button_invite_operator",d.getHtmlElement()),i=t.get("#sh_button_close_chat",d.getHtmlElement()),o=t.get(".sh_footer_menu_list",d.getHtmlElement()),r=t.get(".sh_textarea_answer",d.getHtmlElement());n.style.display="none",i.style.display="none",o.style.display="block",r.style.display="block",c.YHChatFinish(),s.go("button")}else s.is("block",{action:"finish"})?(c.YHChatFinish(),s.go("button")):s.go("block",{action:"finish"});else c.hasQueue&&!c.skipQueueCloseEvent&&c.queueEvent(u.eventDialog.CLOSE),s.go("button");l.trigger("domReInit")}),d.on("ready",function(){var e=d.getHtmlElement();h(),t.get(".dropbtn-language",d.getHtmlElement()).innerHTML=i.language,l.on("changeStatus",h),a.oldMSIE||t.get("#sh_container_audio",e).load(),a.mobile?r.init():o.init(e,t.get(".sh_title",e),function(e){i.set("position","left: "+e.left+"px; top: "+e.top+"px;")})}),d.on("show",function(){var e=t.get("#rh-arrow",document.body);e&&t.remove(e),a.mobile&&r.resize(),o.setDefaultPosition()}),l.on("renderLocalesChangeBlock",function(t){document.getElementById("sh-dropdown-content").innerHTML=function(t){var n="";return t&&t.forEach?(t.forEach(function(t){n+=e.fetch("chat.locale_list_item",{locale_id:t.locale_id,widget_id:t.widget_id,name:t.name})}),n):n}(t)})},["template","dom","handler","settings","draggable","resizable","router","jscd","chat","event","constants"]),JSFrame.controller("queue",function(e,t,n,i,o,r,s){var a=this;a.scope.highload=r.highload_template||null,a.template="chat.queue",a.scope.name=n.get("user-name"),a.scope.offlineText=r.text.offlineText,s.on("settingsUpdated",function(){a.scope.offlineText=r.text.offlineText}),a.handler("block.open.online",function(){var o=t.get("#cw-client-name-queue").value.trim();o.length>0&&(o=o.slice(0,20),n.set("user-name",o),i.skipQueueCloseEvent=!0,e.go("block",{action:"online"}))}),a.handler("block.open.ticket",function(){i.queueEvent(o.eventDialog.SELECT_REQUEST),i.skipQueueCloseEvent=!0,e.go("block",{action:"offline"})}),a.handler("block.open.email",function(){}),a.on("show",function(){a.scope.offlineText=r.text.offlineText,!r.text.showChatButton&&r.text.offlineText&&r.text.offlineText.length&&(t.get("#chatButton",a.getHtmlElement()).style.display="none"),i.hasQueue&&(i.skipQueueCloseEvent=!1,i.queueEvent(o.eventDialog.WAITING))})},["router","dom","localStorage","chat","constants","settings","event"]),JSFrame.controller("auth",function(e,t,n,i){this.template="chat.auth",this.scope.name=n.get("user-name"),this.handler("block.dialog.start",function(){var i=t.get("#cw-client-name").value.trim();i.length>0&&(i=i.slice(0,20),n.set("user-name",i),e.go("block",{action:"online"}))}),this.handler("block.dialog.localeChange",function(e){var t={locale_id:e.getAttribute("locale_id"),widget_id:e.getAttribute("widget_id")};i.changeLocale(t)})},["router","dom","localStorage","chat"]),JSFrame.controller("offline",function(e,t,n,i){var o=this;o.template="chat.offline",o.handler("block.offline.request",function(){var n=[{key:"name",pattern:/.{3,50}/i,element:null},{key:"email",pattern:/^[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$/,element:null},{key:"phone",pattern:/^\+?[\-()0-9\s]{10,20}$/i,element:null},{key:"comment",pattern:/.{1,500}/i,element:null}],r={},s=!0;return n.forEach(function(e){e.element=t.get('[name="chat[offline]['+e.key+']"]',o.getHtmlElement());var n=e.element?e.element.value.trim():"",i=e.pattern.test(n);e.element.style.borderColor=i?"#dadad9":"#f00",s=s&&i,r[e.key]=i?n:null}),!0===s&&(e.data.chat_id&&(i.trigger("clearNoticeTimer"),e.YHChatFinish()),e.request(r),t.get(".sh_offline_form",o.getHtmlElement()).style.display="none",t.get(".sh_offline_done",o.getHtmlElement()).style.display="block",n.forEach(function(e){e.element.value=""})),s}),o.handler("block.offline.close",function(){i.trigger("domReInit"),n.go("button")}),o.on("show",function(){var e=n.getParams().showHeader;void 0===e&&(e=!0),t.get(".sh_offline_done",o.getHtmlElement()).style.display="none",t.get(".sh_offline_form",o.getHtmlElement()).style.display="block",e||(t.get(".sh_form_description",o.getHtmlElement()).style.display="none")})},["chat","dom","router","event"]),JSFrame.controller("online",function(e,t,n,i,o,r,s,a,c,l,u,h){function d(n){n.chat_id||!0!==n.service||(n.chat_id=s.data.chat_id),n.support_email=n.support_email||"";var i=e.get("#sh_messages-"+n.chat_id),o=function(e){if(7==e.type_id){var t=e.text.name||e.text.base;return t&&t.length>18&&(t=t.substr(0,18)+"..."),c.fetch("message.file",{message_id:e.message_id,shortname:t,filename:e.text.name,filesize:l.readableFileSize(e.text.size),basename:e.text.base,host:JSFrame.windowProtocol+"//"+u.host,dir:e.path?e.path.dir:"",node_host:JSFrame.windowProtocol+"//"+u.node_host})}return c.fetch("message.item",{message_id:e.message_id,text:e.text.nl2br().replace(/\(\:([a-z_]+)\:\)/g,function(e,t){return c.fetch("message.smile",{name:t})}).replace(/(http.?:\/\/[.\w-#/=&?]+)/gi,"<a target='_blank' href='$1'>$1</a>")})}(n),r=e.getAll(".sh_message",i);if(2==n.client.user_type&&(JSFrame.getController("wait").hide(),JSFrame.getController("offline").hide(),t.go("block",{action:"online"})),r.length&&r[r.length-1].getAttribute("data-id")==n.client.client_id)e.append(e.get(".sh_message_items",r[r.length-1]),o);else{var a=n.type_id==h.messageType.AUTO_MESSAGE_WAIT?u.system_img:n.client.photo;e.append(i,c.fetch("message.block",{id:n.message_id,data_id:n.client.client_id,name:n.client.name,photo:JSFrame.windowProtocol+"//"+u.host+"/photos/"+a,time:l.makeTime(n.timestamp),nick_sel:2==n.client.user_type?" sh_mess_nick_sel":"",items:o,support_email:n.support_email}))}var d=e.get("#sh_messages");d.scrollTop=d.scrollHeight}function f(e){if(s.data.status_id===h.chatStatus.STATUS_INPROCESS)for(var t=0;t<e.clipboardData.items.length;t++)if("file"==e.clipboardData.items[t].kind&&"image/png"==e.clipboardData.items[t].type){var n=e.clipboardData.items[t].getAsFile(),i=new FileReader;i.onloadend=function(e){r.emit("client:chat.base64File",{img:this.result})},i.readAsDataURL(n),e.preventDefault();break}}var p=this,m=null;p.template="chat.online",p.scope.history="",p.scope.wait="",p.scope.value="",p.scope.smiles=["smile","upset","no_words","laughter","shock","wink","sleep","steep","anger","offense"],p.scope.mute=n.mute?" sh_ic_off":"",p.scope.message=i.get("block.online.message")||"",p.scope.messages=[],p.handler("block.online.mute",function(e){n.set("mute",!n.mute),n.mute?e.className+=" sh_ic_off":e.className=e.className.replace(/\s*sh\_ic\_off\s*/,"")}),p.handler("block.online.showSmiles",function(t){var n=e.get(".sh_smiles",t);"none"===n.style.display?n.style.display="block":n.style.display="none"}),p.handler("block.online.selectSmile",function(t){var n=e.get(".sh_smile_icon",t).getAttribute("data-name");e.get(".sh_textarea_field").value+="(:"+n+":)"}),p.handler("block.online.finish",function(){t.go("block",{action:"finish"})}),p.handler("block.online.inputMessage",function(e,t){if(13===t.keyCode){var n=e.value.trim();n.length>0&&s.data.status_id===h.chatStatus.STATUS_INPROCESS&&(m=null,s.send(n),e.value="")}else m||(m=l.throttle(function(){var t=e.value.trim();t.length>0&&s.preview(t)},500)),m();i.set("block.online.message",e.value)}),p.handler("block.online.send",function(){if(s.data.status_id==h.chatStatus.STATUS_INPROCESS){var t=e.get(".sh_textarea_field",p.getHtmlElement()),n=t.value.trim();n.length>0&&(s.send(n),t.value="",i.set("block.online.message",t.value))}}),p.handler("block.online.inviteOperator",function(){JSFrame.getController("button").getUserInfoBeforeOpen(function(){var t=e.get("#sh_button_invite_operator",p.getHtmlElement()),n=e.get("#sh_button_close_chat",p.getHtmlElement()),i=e.get(".sh_footer_menu_list",p.getHtmlElement()),o=e.get(".sh_textarea_answer",p.getHtmlElement());t.style.display="none",n.style.display="none",i.style.display="block",o.style.display="block",JSFrame.getController("wait").show(),s.inviteOperator()})}),p.handler("block.online.closeChat",function(){var n=e.get("#sh_button_invite_operator",p.getHtmlElement()),i=e.get("#sh_button_close_chat",p.getHtmlElement()),o=e.get(".sh_footer_menu_list",p.getHtmlElement()),r=e.get(".sh_textarea_answer",p.getHtmlElement());n.style.display="none",i.style.display="none",o.style.display="block",r.style.display="block",s.YHChatFinish(),t.go("button")}),p.on("ready",function(){o.oldMSIE||r.uploaderInit(e.get(".sh_attach_file",p.getHtmlElement())),t.is("block",{action:"online"})&&(JSFrame.getController("wait").show(),s.start())}),p.on("show",function(){e.get("#sh_messages-"+s.data.chat_id)||(JSFrame.getController("wait").show(),s.start()),function(){var e=document.querySelector(".sh_textarea_field");e&&(e.removeEventListener("paste",f),e.addEventListener("paste",f))}()}),a.on("chatUpdated",function(){if(e.get("#sh_messages-"+s.data.chat_id)||e.append(e.get("#sh_messages",p.getHtmlElement()),c.fetch("chat.messages_block",{chat_id:s.data.chat_id})),s.data.messages.forEach(d),s.data.status_id==h.chatStatus.STATUS_DEFERRED){var t=e.get("#sh_button_invite_operator",p.getHtmlElement()),n=e.get("#sh_button_close_chat",p.getHtmlElement()),i=e.get(".sh_footer_menu_list",p.getHtmlElement()),o=e.get(".sh_textarea_answer",p.getHtmlElement());t.style.display="block",n.style.display="block",i.style.display="none",o.style.display="none",JSFrame.getController("wait").hide()}}),a.on("chatClosed",function(){var t=e.get("#sh_messages-"+s.data.chat_id);t&&e.remove(t)}),a.on("messageReceived",d),a.on("messageUpdated",function(t){e.replaceWith(e.get("#sh_"+t.message_id),c.fetch("message.item",{message_id:t.message_id,text:t.text.nl2br().replace(/\(\:([a-z_]+)\:\)/g,function(e,t){return c.fetch("message.smile",{name:t})})}))}),a.on("formReceived",function(t){e.append(e.get("#sh_messages",p.getHtmlElement()),c.fetch("message.block",{id:t.message_id,data_id:t.client.client_id,name:t.client.name,photo:JSFrame.windowProtocol+"//"+u.host+"/photos/"+t.client.photo,time:l.makeTime(t.timestamp),nick_sel:2==t.client.user_type?" sh_mess_nick_sel":"",support_email:t.support_email||"",items:c.fetch("message.form",{html:t.form.html})}));var n=e.get("#cw-message-"+t.message_id);e.get(".cw-form-submit",n).onclick=function(){for(var i={},o=e.getAll(".cw-form [name]",n),r=0;r<o.length;r++){i[o[r].getAttribute("name")]=o[r].value}s.send(i,t.form.form_id),e.remove(n)};var i=e.get("#sh_messages");i.scrollTop=i.scrollHeight}),a.on("changeStatus",function(){})},["dom","router","settings","sessionStorage","jscd","socketIO","chat","event","template","func","config","constants"]),JSFrame.controller("history",function(e,t,n,i,o,r,s){function a(e){var t=n.get("#sh_messages-"+e.chat_id),a=function(e){if(7==e.type_id){var t=e.text.name;return t.length>18&&(t=t.substr(0,18)+"..."),i.fetch("message.file",{message_id:e.message_id,shortname:t,filename:e.text.name,filesize:o.readableFileSize(e.text.size),basename:e.text.base,host:JSFrame.windowProtocol+"//"+r.host,node_host:JSFrame.windowProtocol+"//"+r.node_host})}return i.fetch("message.item",{message_id:e.message_id,text:e.text.nl2br().replace(/\(\:([a-z_]+)\:\)/g,function(e,t){return i.fetch("message.smile",{name:t})})})}(e),c=n.getAll(".sh_message",t);if(c.length&&c[c.length-1].getAttribute("data-id")==e.client.client_id)n.append(n.get(".sh_message_items",c[c.length-1]),a);else{var l=e.type_id==s.messageType.AUTO_MESSAGE_WAIT?r.system_img:e.client.photo;n.append(t,i.fetch("message.block",{id:e.message_id,data_id:e.client.client_id,name:e.client.name,photo:JSFrame.windowProtocol+"//"+r.host+"/photos/"+l,time:o.makeTime(e.timestamp),nick_sel:2==e.client.user_type?" sh_mess_nick_sel":"",items:a,support_email:""}))}}var c=this;c.template="chat.history",c.handler("block.history.show",function(){c.hide(),t.history()}),e.on("historyAdded",function(){t.historyData.forEach(function(e){n.get("#sh_messages-"+e.chat_id)||(n.after(c.getHtmlElement(),i.fetch("chat.history_block",{chat_id:e.chat_id,date:o.makeDate(e.create_time)+" "+o.makeTime(e.create_time)})),e.messages.forEach(a))}),c.show()}),e.on("chatClosed",function(){t.historyData.forEach(function(e){var t=n.get("#sh_messages-"+e.chat_id);t&&n.remove(t)}),t.historyData=[]})},["event","chat","dom","template","func","config","constants"]),JSFrame.controller("wait",function(e,t,n,i){function o(){n.isWaiting&&(i.get("#attach_button_block",JSFrame.getController("online").getHtmlElement()).style.display="none",i.get("#YH_smiles",JSFrame.getController("online").getHtmlElement()).style.display="none")}var r=this;r.template="chat.wait",r.scope.text_waiting=e.text.waiting,o(),t.on("localeChangedByUser",function(){r.scope.text_waiting=e.text.waiting,document.querySelector(".sh_wait_connection").innerText=r.scope.text_waiting}),r.on("show",function(){o()}),r.hide=function(){i.get("#attach_button_block",JSFrame.getController("online").getHtmlElement()).style.display="block",i.get("#YH_smiles",JSFrame.getController("online").getHtmlElement()).style.display="block","none"!==this.getHtmlElement().style.display&&(this.getHtmlElement().style.display="none",this.trigger("hide"))}},["settings","event","chat","dom"]),JSFrame.controller("finish",function(e,t,n,i,o,r){var s=this;r.on("chatFinished",function(){n.isFinished&&(t.get(".sh_button_back",s.getHtmlElement()).style.display="none")}),s.template="chat.finish",s.validate=!1,s.scope.marksText=o.text.marks||"",s.handler("block.finish.back",function(){n.isFinished?(e.go("block",{action:"auth"}),n={}):e.go("block",{action:"online"})}),s.handler("block.finish.save",function(){var i=t.get('[name="chat[email]"]',s.getHtmlElement()).value.trim();n.YHChatFinish(i),e.go("button")}),s.handler("block.finish.validate",function(e){!{"chat[email]":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}[e.getAttribute("name")].test(e.value)?(s.validate=!1,e.style.border="2px solid red"):(s.validate=!0,e.style.border="1px solid #dadad9")}),s.on("ready",function(){t.get(".sh_button_back",s.getHtmlElement()).style.display=e.getParams().noback?"none":"",i.stars.init(t.get("#yh-widget-rating",s.getHtmlElement()),[{title:o.text.marksText,rating:0}])}),s.on("show",function(){t.get(".sh_button_back",s.getHtmlElement()).style.display=n.isFinished||e.getParams().noback?"none":"",t.get("#yh-widget-rating",s.getHtmlElement()).style.display=n.isHideStars()?"none":"",t.get('[name="chat[email]"]',s.getHtmlElement()).value=""})},["router","dom","chat","starsService","settings","event"]),JSFrame.controller("button",function(e,t,n,i,o,r,s){function a(e){var i="horizontal"===t.button.layout?"_trans":"";return"top"!==t.button.appearance&&"bottom"!==t.button.appearance&&(e=e.replace(/./g,function(e){return n.fetch("button.char",{suffix:i,char:e})})),e}function c(){var e=o.online?t.text.online:t.text.offline;if(e||(e="Online chat"),i.get(".sh_title_text",l.getHtmlElement()).innerHTML=a(e),!0===u){var n=t.text.ticket;i.get(".sh_title_request",l.getHtmlElement()).innerHTML=a(n)}}var l=this,u=o.online&&!0===t.button.leftTicket;l.template=u?"button.ticket":"button.block";var h=[];l.scope.side_appearance=t.button.appearance,l.scope.side_position=t.button.position,l.scope.style=t.button.hide||t.button.no?"display: none;":"visibility: visible;",l.getUserInfoBeforeOpen=function(e){s.emit("main:user.info"),"function"==typeof e&&h.push(e)},s.on("client:info",function(e){o.setUserInfo(e.userInfo),o.setHasQueue(e.hasQueue),h.length?(h.forEach(function(t){t(e)}),h=[]):l.openBlock()}),l.openBlock=function(){var t={action:o.hasQueue?"queue":"auth"};o.online?o.data.chat_id>0&&(o.isFinished?(t.action="finish",t.noback=!0):t.action="online"):t.action="offline",e.go("block",t)},l.handler("block.open",l.getUserInfoBeforeOpen),l.on("ready",function(){c(),r.on("changeStatus",c)}),l.on("show",function(){c(),(t.button.hide&&!o.data.chat_id||t.button.no)&&l.hide()})},["router","settings","template","dom","chat","event","socketIO"]),JSFrame.controller("faq",function(e,t,n,i,o,r){function s(){!function(e){e.preventDefault&&e.preventDefault();var n=document.getElementById("cw-client-question").value.toLowerCase().trim();0===n.indexOf("#")&&(n=n.slice(1));13==e.keyCode&&n.length?(u.searchTemplate.searchText=n,u.searchTemplate.tagId=void 0,u.data.tags&&u.data.tags.some(function(e){if(n==e.name.toLowerCase())return u.searchTemplate.searchText=e.name.toLowerCase(),u.searchTemplate.tagId=e.id,!0}),t.getDataByTag(u.searchTemplate),u.searchTemplate.tagId&&a(!0)):n.length||(u.data.questions=u.topQuestions,a())}({keyCode:13})}function a(e){document.getElementById("questionList").innerHTML=e?o.fetch("faq.wait",{text_waiting:""}):function(){var e="",t="visible";if(!u.data.questions)return e;return u.data.questions.forEach(function(n){n.id?e+=o.fetch("faq.question_list_item",{id:n.id,question:n.question,answer:n.answer}):(e+=o.fetch("faq.not_found",{id:n.id,question:r.translate(n.question)}),t="hidden")}),document.getElementById("qListHeader").style.visibility=t,e}()}function c(){document.getElementById("tagList").innerHTML=function(){var e="";if(!u.data.tags)return e;for(var t=0;t<10;t++)u.data.tags[t]&&(e+=o.fetch("faq.tag_list_item",{id:u.data.tags[t].id,name:"#"+u.data.tags[t].name}));return e}()}function l(){document.getElementById("tagCloud").innerHTML=function(){var e="";if(!u.tagCloud)return e;return u.tagCloud.forEach(function(t){e+=o.fetch("faq.tag_cloud_list_item",{id:t.id,tag:t.name,rating:t.rating})}),e}()}var u=this;u.template="faq.block",u.validate=!1,u.data={},u.topQuestions=[],u.searchTemplate={projectId:n.userInfo.project_id,userId:n.userInfo.user_id,localeId:n.userInfo.locale_id},t.getData(u.searchTemplate),i.on("localeChangedByUser",function(e){u.searchTemplate.localeId=e.localeId,t.getData(u.searchTemplate)}),i.on("faqInitReceived",function(e){u.data=e,u.topQuestions=e.questions,e.tags&&(u.tagCloud=e.tags.slice(0,10),document.getElementById("tagsCloudBlock").style.display="block"),u.topQuestions.length&&(document.getElementById("faqButton").style.display="block")}),i.on("faqDocumentsByTagReceived",function(e){u.data.questions=e,a()}),u.handler("block.faq.question_toggle",function(e){var n=e.classList.toggle("active"),i=e.dataset,o=0;i.id&&(o=+i.id),n&&u.data.questions.forEach(function(e){e.id==o&&(t.selectedQuestion=e,t.selectQuestion({id:o}))});var r=e.nextElementSibling;r.style.maxHeight?r.style.maxHeight=null:r.style.maxHeight=r.scrollHeight+"px",setTimeout(function(){e.scrollIntoView({block:"end",behavior:"auto"})},100)}),u.handler("block.faq.question",function(n){var i=n.dataset,o=0;i.id&&(o=+i.id),u.data.questions.forEach(function(e){e.id==o&&(t.selectedQuestion=e,t.selectQuestion({id:o}))}),e.go("block",{action:"question"})}),u.handler("faq.tag_selected",function(e){u.searchTemplate.searchText=e.innerHTML.toLocaleLowerCase(),u.searchTemplate.tagId=+e.getAttribute("id");var n=[].indexOf.call(e.classList,"active")>0;JSFrame.removeClassFromElements("active","tag-cloud-button"),n?(u.data.questions=u.topQuestions,a()):(e.classList.add("active"),t.getDataByTag(u.searchTemplate))});var h=_.debounce(s,800);u.on("show",function(){a(),c(),l(),document.getElementById("cw-client-question").addEventListener("keyup",h)}),u.handler("block.faq.action_search",s)},["router","faq","chat","event","template","localization"]),JSFrame.controller("notice",function(e,t,n,i,o,r){var s=this;s.template="chat.notice",s.noticeText={firstHighLoadText:",    :(<br> ,       ,       ",secondHighLoadText:"     !<br>  ,              .       ,          ,         ."},s.scope.noticeText=s.noticeText.firstHighLoadText,s.scope.projectEmail=e.support_email,s.handler("block.notice.back",function(){n.hasNotice=!1,t.go("block",{action:"online"})}),s.handler("block.notice.mailto",function(){n.hasNotice=!1,n.YHChatFinish(),t.go("button")}),s.on("ready",function(){}),s.on("show",function(){e.support_email?document.getElementById("sh_mailto_link_notice").style.display="block":document.getElementById("sh_mailto_link_notice").style.display="none"}),o.on("renderNoticeText",function(e){s.scope.noticeText=r.translate(s.noticeText[e.field]);document.querySelector(".sh_notice_text").innerHTML=s.scope.noticeText})},["settings","router","chat","notice","event","localization"]),JSFrame.controller("question",function(e,t){var n=this;n.template="faq.question",n.on("show",function(){n.body="",n.title="",Object.keys(t.selectedQuestion).length&&(n.question=t.selectedQuestion.question,n.answer=t.selectedQuestion.answer,document.getElementById("answer").innerHTML=n.answer,document.getElementById("question").innerHTML=n.question)})},["router","faq"]),JSFrame.controller("close_offline",function(e,t,n){this.template="chat.close_offline",this.handler("block.offline_request",function(){e.go("block",{action:"offline",noback:!0,showHeader:!1})}),this.handler("block.close_offline",function(){n.YHChatFinish(),e.go("button")}),this.on("show",function(e){})},["router","event","chat"]),JSFrame.config("constants",{eventDialog:{WAITING:1,CLOSE:2,SELECT_REQUEST:3,SELECT_CHAT:4,CONNECTED:5,CLOSE_NOANSWER:6},chatStatus:{STATUS_DEFERRED:0,STATUS_PENDING:1,STATUS_INPROCESS:2,STATUS_FINISHED:3},messageType:{MESSAGE:0,PRIVATE:1,TOPIC:2,FORM:3,FINANCE_HISTORY:4,LOGIN_HISTORY:5,ROUND_HISTORY:6,ATTACH:7,USER_INFO:8,TAG:9,FORM_SEND:10,AUTO_MESSAGE_WAIT:11}}),JSFrame.config("config",{debug:!1,node_host:"node.yhelperinfo.net",host:"node.yhelperinfo.net",node_host_prefix:"",system_img:"system_chat.png",mobile_button_show:!1}),JSFrame.config("locales",{en:{", ,      ?":"Please tell us how should we address you?","  ":"Visitors on the website"," ":"Your name"," ":"Start the dialogue"," ":"Finish the dialogue","   ":"Open in a new window","":"Collapse"," ":"The dialogue is over","  ?":"Is your problem solved?",",  ":"Yes, the problem is solved",",   ":"No, the problem is not solved","     ":"Please leave us your contact information","*":"Email","":"Email","*":"Phone","":"Phone","":"Comment"," ?":"Save the dialogue?","":"Back","  ":"Save and exit","":"History","   . ,      ,    !":"We are offline. Please leave us your contact information and your question, and we will get in touch with you later!"," *":"Introduce yourselves","":"Introduce yourselves"," *":"Your question"," ":"Your question","":"Send","!":"Thank you!"," .":"The message is sent."," ":"Close the window","":"Sound","":"Finish"," ":"Send a file","":"Smile","  ...":"Enter your message...","":"Yes","":"No","!<br>     .  ,    ":"Hello!<br>All operators are busy at the moment. Please pay attention that you always can"," ":"Submit your request"," ":"Write an email","    ,     ":"If you prefer using chat to connect with operator please specify you name below"," ...":"Your name..."," ":"and press"," ":"Invite operator","":"Close","  ":"Evaluate operator's work","":"Chat","":"FAQ","   ":"Search by tags"," ":"Categories"," ":"Trending questions","  ":"No results found","   ":"To wait for the connection with the support manager",",    :(<br> ,       ,       ":"It seems, the connection lasts too long:( <br>Please note, if you contact us in the alternative way, you will certainly receive the answer as soon as possible.","     !<br>  ,              .       ,          ,         .":"The number of contacts exceeded our expectations!<br>We are extremely sorry for keeping you waiting for the connection with our support manager so long, and we are already working towards solution. Our team apologizes for the inconvenience so, please, keep in mind you can always leave us a request or write a letter so that your question will be answered as soon as possible.","     . ,   <strong> ' '</strong><br/>       .      ":"Unfortunately, all the Customer Support service operators are unavailable at the moment.You may press a <strong>button 'Leave a request'</strong><br/> or contact us again in the nearest time. Our apologies for any inconveniences caused."},tr:{", ,      ?":"Ltfen size nasl hitap etmemiz gerektiini belirtin.","  ":"Web sitesindeki ziyaretiler"," ":"Adnz"," ":"Diyalou balat"," ":"Diyalou bitir","   ":"Yeni pencerede a","":"Klt"," ":"Diyalog sona erdi","  ?":"Sorununuz zld m?",",  ":"Evet, sorunum zld",",   ":"Hayr, sorunum zlmedi","     ":"Ltfen bize iletiim bilgilerinizi brakn","*":"E-posta","":"E-posta","*":"Telefon","":"Telefon","":"Yorum"," ?":"Diyalou kaydetmek ister misiniz?","":"Geri git","  ":"Kaydet ve k","":"Gemi","   . ,      ,    !":"u an offline durumdayz. Ltfen bize iletiim bilgilerinizi brakn. Size daha sonra dn yapacaz!"," *":"Kendinizi tantn","":"Kendinizi tantn"," *":"Sorunuz"," ":"Sorunuz","":"Gnder","!":"Teekkrler!"," .":"Mesaj gnderildi."," ":"Pencereyi kapat","":"Ses","":"Bitir"," ":"Dosya gnder","":"Glmse","  ...":"Mesajnz girin...","":"Evet","":"Hayr","!<br>     .  ,    ":"Merhaba!<br>u anda tm operatrler megul. Hep can unutmaynz"," ":"Talep gnderme"," ":"E-posta gnderme","    ,     ":"Mesajlamay tercih ediyorsanz, ltfen aadaki bilgileri girerek bir operatre balann"," ...":"Ad..."," ":"Ve tklayn"," ":"Operatr davet edin","":"Kapat","  ":"peratrn iini deerlendirin","":"Chat","":"FAQ","   ":"Search by tags"," ":"Categories"," ":"Trending questions","  ":"Sonu bulunamad","   ":"Operatre balant iin bekleyin",",    :(<br> ,       ,       ":"It seems, the connection lasts too long:( <br>Please note, if you contact us in the alternative way, you will certainly receive the answer as soon as possible.","     !<br>  ,              .       ,          ,         .":"The number of contacts exceeded our expectations!<br>We are extremely sorry for keeping you waiting for the connection with our support manager so long, and we are already working towards solution. Our team apologizes for the inconvenience so, please, keep in mind you can always leave us a request or write a letter so that your question will be answered as soon as possible.","     . ,   <strong> ' '</strong><br/>       .      ":"Unfortunately, all the Customer Support service operators are unavailable at the moment.You may press a <strong>button 'Leave a request'</strong><br/> or contact us again in the nearest time. Our apologies for any inconveniences caused."},it:{", ,      ?":"Per favore ci indichi come dovremmo indirizzarci verso di lei?","  ":"Visitatori nel sito web"," ":"Suo nome"," ":"Inizio del dialogo"," ":"Fine del dialogo","   ":"Aprire in una nuova finestra","":"Restringere"," ":"Il dialogo  finito","  ?":"Il suo problema  stato risolto?",",  ":"Si, il problema  stato risolto",",   ":"No, il problema  stato risolto","     ":"La preghiamo di lasciarci le sue informazioni di contatto ","*":"Email","":"Email","*":"Telefono","":"Telefono","":"Commento"," ?":"Salvare il dialogo?","":"Indietro","  ":"Salvare ed uscire","":"Cronologia","   . ,      ,    !":"Non siamo in linea. La preghiamo di lasciarci le sue informazioni di contatto e la sua domanda, e la contatteremo in seguito!"," *":"Si presenti","":"Si presenti"," *":"La sua domanda"," ":"La sua domanda","":"Inviare","!":"Grazie!"," .":"Il messaggio"," ":"Chiudere la finestra","":"Suono","":"Terminare"," ":"Inviare un file","":"Faccina","  ...":"Inserisca il suo messaggio","":"Si","":"No","!<br>     .  ,    ":"Ciao!<br>Attualmente, tutti gli operatori sono occupati. Si prega di notare che  sempre possibile"," ":"Inviare una richiesta"," ":"Inviare un'e-mail","    ,     ":"Se preferiresti comunicare tramite chat, ti preghiamo di seguire la seguente procedura per collegarti con un operatore"," ...":"Nome..."," ":"E cliccare"," ":"Invita un operatore","":"Chiudi","  ":"Evaluate operator's work","":"Chat","":"FAQ","   ":"Search by tags"," ":"Categories"," ":"Trending questions","  ":"Nessun risultato trovato","   ":"Attendere una connessione al gestore",",    :(<br> ,       ,       ":"It seems, the connection lasts too long:( <br>Please note, if you contact us in the alternative way, you will certainly receive the answer as soon as possible.","     !<br>  ,              .       ,          ,         .":"The number of contacts exceeded our expectations!<br>We are extremely sorry for keeping you waiting for the connection with our support manager so long, and we are already working towards solution. Our team apologizes for the inconvenience so, please, keep in mind you can always leave us a request or write a letter so that your question will be answered as soon as possible.","     . ,   <strong> ' '</strong><br/>       .      ":"Unfortunately, all the Customer Support service operators are unavailable at the moment.You may press a <strong>button 'Leave a request'</strong><br/> or contact us again in the nearest time. Our apologies for any inconveniences caused."},uk:{", ,      ?":" ,  ,      ?","  ":"  "," ":" '"," ":" "," ":" ","   ":"   ","":""," ":" ","  ?":"  ?",",  ":",  ",",   ":",   ","     ":"-,    i i  '","*":"Email","":"Email","*":"","":"","":""," ?":" ?","":"","  ":"  ","":"","   . ,      ,    !":"   i.  ,        ,   '   !"," *":"","":""," *":" "," ":" ","":"","!":"!"," .":" "," ":" ","":"","":""," ":" ","":"","  ...":"   ...","":"","":"","!<br>     .  ,    ":"!<br>   .  ,    "," ":" "," ":" ","    ,     ":"    ,  '   "," ...":" '..."," ":" "," ":" ","":"","  ":"  ","":"Chat","":"FAQ","   ":"Search by tags"," ":"Categories"," ":"Trending questions","  ":"i  ","   ":" '  ",",    :(<br> ,       ,       ":",    :( <br>  ,    '   ,       ","     !<br>  ,              .       ,          ,         .":"     ! <br>   ,   '           .       ,          ,       .","     . ,   <strong> ' '</strong><br/>       .      ":"     .  ,   <strong> ' '</strong><br/>      .      "},cn:{", ,      ?":"","  ":""," ":""," ":""," ":"","   ":"","":""," ":"","  ?":"",",  ":"",",   ":"","     ":"","*":"","":"","*":"","":"","":""," ?":"","":"","  ":"","":"","   . ,      ,    !":""," *":"","":""," *":""," ":"","":"","!":""," .":""," ":"","":"","":""," ":"","":"","  ...":"...","":"","":"","!<br>     .  ,    ":"<br>"," ":""," ":"","    ,     ":""," ...":"..."," ":""," ":"","":"","  ":"","":"","":"","   ":""," ":""," ":"","  ":"","   ":"",",    :(<br> ,       ,       ":"T_T ","     !<br>  ,              .       ,          ,         .":", , .","     . ,   <strong> ' '</strong><br/>       .      ":"<br/><br/>"},cht:{", ,      ?":"","  ":""," ":""," ":""," ":"","   ":"","":""," ":"","  ?":"",",  ":"",",   ":"","     ":"","*":"","":"","*":"","":"","":""," ?":"","":"","  ":"","":"","   . ,      ,    !":""," *":"","":""," *":""," ":"","":"","!":""," .":""," ":"","":"","":""," ":"","":"","  ...":"...","":"","":"","!<br>     .  ,    ":"<br>"," ":""," ":"","    ,     ":""," ...":"..."," ":""," ":"","":"","  ":"","":"","":"","   ":""," ":""," ":"","  ":"","   ":"",",    :(<br> ,       ,       ":"T_T ","     !<br>  ,              .       ,          ,         .":", , .","     . ,   <strong> ' '</strong><br/>       .      ":"<br/>"},de:{", ,      ?":"Sagen Sie uns bitte, wie wir Sie anreden knnen","  ":"Die Besucherzahl auf der Website"," ":"Name"," ":"Chat starten"," ":"Chat beenden","   ":"Im neuen Fenster ffnen","":"Minimieren"," ":"Chat ist beendet","  ?":"Ist Ihr Problem gelst worden?",",  ":"Ja, mein Problem wurde behoben.",",   ":"Nein, mein Problem wurde nicht gelst","     ":"Bitte hinterlassen Sie Ihre Kontaktdaten, damit wir mit Ihnen in Kontakt treten knnen","*":"E-Mail","":"E-Mail","*":"Telefon","":"Telefon","":"Kommentare"," ?":"Chat speichern?","":"Zurck","  ":"Speichern und beenden","":"Chronik","   . ,      ,    !":"Bitte hinterlassen Sie Ihre Kontaktdaten und Ihre Fragen und wir werden uns mit Ihnen in Verbindung setzen."," *":"Name","":"Sagen Sie uns, wer Sie sind"," *":"Ihre Fragen oder Wnsche"," ":"Ihre Fragen oder Wnsche","":"Senden","!":"Danke!"," .":"Nachricht senden"," ":"Fenster schlieen","":"Ton","":"Chat beenden"," ":"Datei hochladen","":"Smiley","  ...":"Geben Sie den Nachrichten Text hier ein...","":"Ja","":"Nein","!<br>     .  ,    ":"Hallo!<br>Zur Zeit sind alle unsere Kundenberater besetzt. Beachten Sie, bitte, dass Sie immer...... knnen"," ":"Ihre Nachricht hinterlassen"," ":"Senden Sie eine e-mail","    ,     ":"Wenn sie es vorziehen zu chatten, dann geben Sie zum Herstellen einer Verbindung den Anwender an"," ...":"Name"," ":"und klicken Sie"," ":"Anwender einladen","":"Schlieen","  ":"Bewerten Sie bitte die Arbeit des Operators","":"Chat","":"FAQ","   ":"Search by tags"," ":"Categories"," ":"Trending questions","  ":"Keine ergebnisse gefunden","   ":"Die Verbindung mit dem Kundendienst-Manager erwarten",",    :(<br> ,       ,       ":"Es scheint, die Wartezeit dehnt sich ein bisschen:(<br> Bitte beachten, wenn Sie unseren Kundendienst auf alternativem Weg kontaktieren, erhalten Sie eine Antwort bestimmt in krzestmglicher Zeit.","     !<br>  ,              .       ,          ,         .":"Die Anzahl von Kontakten bertrifft alle unsere Erwartungen! <br> Es tut uns leid, dass die Verbindung mit Kundendienst-Manager so viel Zeit braucht, wir arbeiten schon an der Lsung. Wir vorbringen Entschuldigungen und wollen Sie noch einmal daran erinnern, dass Sie immer eine Anfrage stellen oder einen Brief senden knnen und Ihre Frage in allernchster Zeit gelst sein wird.","     . ,   <strong> ' '</strong><br/>       .      ":"Zurzeit sind alle Operateure des Kundendienstes beschftigt. Bitte klicken Sie auf 'Anfrage lassen' oder wenden Sie sich an uns in kurzer Frist nochmals. Wir bringen unsere Entschuldigungen fr die Unbequemlichkeiten vor."},no:{", ,      ?":"Kunne du si hvordan skal vi henvise oss til deg?","  ":"Antall beskende p nettsiden"," ":"Ditt navn"," ":"Begyn dialog"," ":"Avslutt dialog","   ":"pne p et nytt vindu","":"Skjul vindu"," ":"Dialog sluttet","  ?":"Har problemmet ditt blitt lst?",",  ":"Ja, problemet er lst",",   ":"Nei, problemet er ikke lst","     ":"Vennligst, legg til opplysninger for  kontakte deg","*":"E-post","":"E-post","*":"Telefon","":"Telefon","":"Kommentarer"," ?":"Lagre dialog?","":"Tilbake","  ":"Lagre og avslutt","":"Historie","   . ,      ,    !":"Vi er offline. Vennligst, legg til dine kontakter og din foresprsel, og vi skal kontakte deg!"," *":"Introduser deg selv","":"Introduser deg selv"," *":"Ditt sprsml"," ":"Ditt sprsml","":"Sende","!":"Takk!"," .":"Meldingen ble sendt"," ":"Lukke vindu","":"Lyd","":"Avlsutt"," ":"Sende filen","":"Smile","  ...":"Skriv melding","":"Ja","":"Nei","!<br>     .  ,    ":"Hei!<br>Forelpig alle operatrer er opptatt. Vr oppmerksom p at du kan alltid"," ":"Legg til ordre"," ":"Skriv brev","    ,     ":"Hvis det er bedre for deg  bruke chat for  kontake operatr, skriv det"," ...":"Ditt navn"," ":"og trykk"," ":"Inviter operatr","":"Lukke"," ":"Online hjelp"," ":"Legg til melding"," ":"Chat ble sluttet","  ":"Evaluate operator's work","":"Chat","":"FAQ","   ":"Search by tags"," ":"Categories"," ":"Trending questions","  ":"Ingen resultater","   ":"Vent en tilkobling til operatren",",    :(<br> ,       ,       ":"It seems, the connection lasts too long:( <br>Please note, if you contact us in the alternative way, you will certainly receive the answer as soon as possible.","     !<br>  ,              .       ,          ,         .":"The number of contacts exceeded our expectations!<br>We are extremely sorry for keeping you waiting for the connection with our support manager so long, and we are already working towards solution. Our team apologizes for the inconvenience so, please, keep in mind you can always leave us a request or write a letter so that your question will be answered as soon as possible.","     . ,   <strong> ' '</strong><br/>       .      ":"Unfortunately, all the Customer Support service operators are unavailable at the moment.You may press a <strong>button 'Leave a request'</strong><br/> or contact us again in the nearest time. Our apologies for any inconveniences caused."},pt:{", ,      ?":"Diga-nos por favor como podemos cham-lo?","  ":"Visitantes no site"," ":"Seu nome"," ":"Comear o dilogo"," ":"Terminar o dilogo","   ":"Abrir em uma nova janela","":"Calapso"," ":"O dilogo est completo","  ?":"O seu problema est resolvido?",",  ":"Sim, o problema est resolvido",",   ":"No, o problema no est resolvido","     ":"Por favor, deixe suas informaes para que possamos entrar em contacto","*":"Email*","":"Email","*":"Telefone*","":"Telefone","":"Comentrio"," ?":"Guardar o dilogo?","":"Voltar","  ":"Guardar e sair","":"Histria","   . ,      ,    !":"Ns estamos off-line. Por favor, deixe o seu contacto e suas perguntas, ns entraremos em contacto consigo!"," *":"Seu nome","":"Apresente-se"," *":"Sua pergunta"," ":"Sua pergunta","":"Enviar","!":"Agradecemos"," .":"Mensagem enviada"," ":"Feche a janela","":"Som","":"Terminar"," ":"Enviar arquivo","":"Smile","  ...":"Insira o texto da mensagem...","":"Sim","":"No","!<br>     .  ,    ":"Bem-vindo!<br> Nesse momento todos operadores esto ocupados. Preste ateno, que voc sempre pode"," ":"Deixe uma declarao"," ":"Envie uma carta","    ,     ":"I Se for mais conveniente usar o bate-papo, para conexo com o operador especifique"," ...":"Seu nome..."," ":"e clique"," ":"Convide o operador","":"Fechar","  ":"Avalie o trabalho do operador","":"Chat","":"Perguntas feitas frequentemente","   ":"Busca por palavra chave"," ":"Palavra chave"," ":"Perguntas populares","  ":"Nada foi encontrado","   ":"A espera da conexo com o operador",",    :(<br> ,       ,       ":"Parece que a espera foi um pouco atrasada :( <br> Preste ateno, use uma maneira alternativa de se conectar com o servio de suporte, voc definitivamente ter o menor tempo de resposta.","     !<br>  ,              .       ,          ,         .":"O nmero de acessos excedeu todas as nossas expectativas! Lamentamos muito o tempo de conexo com o operador e j estamos trabalhando na soluo. Pedimos desculpas e queremos lembr-lo de que voc sempre pode deixar uma solicitao ou enviar uma carta e sua pergunta. ser resolvido no futuro prximo","     . ,   <strong> ' '</strong><br/>       .      ":"No momento, todos os operadores esto ocupados. Por favor, deixe uma mensaagem ou entre em contato conosco novamente em breve.Pedimos desculpas pelo inconveniente"}}),JSFrame.config("views",{button:{block:'<div id="sh_button" class="shc sh_btn sh_btn_<%= side_appearance %> sh_btn_<%= side_appearance %>_<%= side_position %>" style="<%= style %>" onclick="<%= handler(\'block.open\') %>">\n    <div rel="title" class="shc sh_title_text"></div>\n    <div class="shc sh_block_counter" title="<%= translate("  ") %>">\n        <span rel="counter">0</span>\n    </div>\n</div>',char:'<div class="shc sh_btn_char<%= suffix %>"><%= char %></div>',ticket:'<div id="sh_button" class="shc sh_btn sh_btn_<%= side_appearance %> sh_btn_<%= side_appearance %>_<%= side_position %>" style="<%= style %>">\n    <div class="sh_chat_button_block" onclick="<%= handler(\'block.open\') %>">\n        <div rel="title" class="shc sh_title_text"></div>\n        <div class="shc sh_block_counter" title="<%= translate("  ") %>">\n            <span rel="counter">0</span>\n        </div>\n    </div>\n\n    <div class="sh_ticket_button_block">\n        <div rel="title_request" class="shc sh_title_request" onclick="<%= handler(\'block.open.ticket\') %>"></div>\n    </div>\n</div>'},chat:{auth:'<div class="shc sh_online_box">\n    <div class="shc sh_form" rel="form">\n        <div class="shc sh_form_step sh_form_step_act cw-dialog-question" id="cw-dialog-question" rel="step">\n            <%= translate(", ,      ?") %>\n        </div>\n\n        <div class="sh_clear"></div>\n\n        <div class="shc sh_form_description" rel="description"></div>\n        \n        <div class="shc sh_form_fields" rel="fields">\n            <div class="shc sh_form_field sh_form_field_text chat_name_input_wrapper" rel="field">\n                <input type="text" maxlength="20" title="<%= translate(" ") %>" placeholder="<%= translate(" ") %>" value="<%= name %>" class="shc sh_input" id="cw-client-name">\n            </div>\n        </div>\n\n        <div class="shc sh_button start_dialog" rel="form_button" onclick="<%= handler(\'block.dialog.start\') %>"><%= translate(" ") %></div>\n\n        <div class="shc sh_form_result" rel="apidescription"></div>\n    </div>\n</div>',block:'<div class="shc sh_chat" style="height: 478px; width: 300px; <%= position %>">\n    <div class="shc sh_header" rel="header">\n        <div class="shc sh_top_buttons">\n            <div rel="close" class="shc sh_hico sh_hico_close" title="<%= translate(" ") %>"\n                 onclick="<%= handler(\'block.close\') %>"></div>\n            \x3c!--<div rel="popup" class="shc sh_hico sh_hico_popup" title="<%= translate("   ") %>"></div>--\x3e\n            <div rel="hide" class="shc sh_hico sh_hico_hide" title="<%= translate("") %>"\n                 onclick="<%= handler(\'block.hide\') %>"></div>\n        </div>\n        <div class="shc_dropdown">\n            <div>\n                <button class="shc_dropbtn dropbtn-language"></button>\n            </div>\n            <div class="shc_dropdown-content" id="sh-dropdown-content">\n            </div>\n        </div>\n        <div class="shc sh_header_info">\n            <div class="shc sh_title" rel="title"><%= title %></div>\n        </div>\n    </div>\n\n    <div class="sh_container_root shc">\n        <div class="tab">\n            <button id="chatButton" class="tablinks active" onclick="<%= handler(\'block.chat\')%>"><%= translate("") %></button>\n            <button style="display: none" id="faqButton" class="tablinks" onclick="<%= handler(\'block.faq\')%>"><%= translate("") %></button>\n        </div>\n\n        <div id="sh_container" class="shc sh_container_root sh_scrollbar" rel="scrollbar">\n            <%= controller(\'queue\') %>\n            <%= controller(\'auth\') %>\n            <%= controller(\'offline\') %>\n            <%= controller(\'online\') %>\n            <%= controller(\'finish\') %>\n            <%= controller(\'faq\') %>\n            <%= controller(\'question\') %>\n            <%= controller(\'notice\') %>\n            <%= controller(\'close_offline\') %>\n        </div>\n    </div>\n\n    <div rel="copyright" class="shc sh_copyright">\n        \x3c!--<div rel="resize" class="shc sh_resize"></div>--\x3e\n    </div>\n\n    <audio id="sh_container_audio">\n        <source src="<%= config("host") %>/sounds/<%= sound %>.wav" type="audio/wav">\n        <source src="<%= config("host") %>/sounds/<%= sound %>.ogg" type="audio/ogg">\n        <source src="<%= config("host") %>/sounds/<%= sound %>.mp3" type="audio/mpeg">\n    </audio>\n</div>',close_offline:'<div class="shc sh_close_offline">\n    <div rel="form" class="shc sh_form sh_offline_form" data-id="sh_form_" data-type="">\n\n        <div class="sh_clear"></div>\n\n        <div rel="description" class="shc sh_form_description" style="padding: 5px;">\n            <%= translate("     . ,   <strong> \' \'</strong><br/>       .      ") %>\n        </div>\n\n        <div rel="fields" class="shc sh_form_fields">\n\n        </div>\n\n        <div rel="form_button" class="shc sh_button sh_button_submit"\n             onclick="<%= handler(\'block.offline_request\') %>"><%= translate(" ") %></div>\n\n        <div rel="apidescription" class="shc sh_form_result"></div>\n    </div>\n\n    <div rel="close" class="shc sh_button sh_button_close"\n         onclick="<%= handler(\'block.close_offline\') %>"><%= translate(" ") %></div>\n</div>',finish:'<div class="shc sh_chat_end" rel="online_complate">\n    \x3c!--<div class="shc sh_chat_title"><%= translate(" ") %></div>--\x3e\n    <div id="yh-widget-rating"></div>\n\n    <div class="sh_clear"></div><br><br><br><br>\n    <div class="shc">\n        <div class="shc sh_chat_question"><%= translate(" ?") %></div>\n        <div class="shc sh_chat_fields">\n            <div class="shc sh_form_field">\n                <input rel="exit_email" class="shc sh_input" type="text" oninput="<%= handler(\'block.finish.validate\') %>" placeholder="<%= translate(\'\') %>" name="chat[email]">\n            </div>\n        </div>\n    </div>\n    <div class="shc sh_button_field">\n        <div rel="complate_back" class="shc sh_button sh_button_back" onclick="<%= handler(\'block.finish.back\') %>"><%= translate("") %></div>\n        <div rel="complate_save" class="shc sh_button sh_button_save" onclick="<%= handler(\'block.finish.save\') %>"><%= translate("  ") %></div>\n    </div>\n</div>',history:'<div class="shc sh_history_btn" rel="history" onclick="<%= handler(\'block.history.show\') %>"><%= translate("") %> </div>',history_block:'<div id="sh_messages-<%= chat_id %>" style="padding: 10px 0; background: #e7e7e7;">\n    <div style="text-align: center; font-weight: bold; margin-top: 10px;"><%= date %></div>\n</div>',locale_list_item:'<a class="shc_dropbtn" onclick="<%= handler(\'block.dialog.localeChange\') %>" locale_id="<%= locale_id %>" widget_id="<%= widget_id %>" ><%= name %></a>',messages_block:'<div id="sh_messages-<%= chat_id %>"></div>',notice:'<div class="shc sh_chat_end" rel="online_complate">\n    <div class="shc sh_chat_question" rel="step" style="text-align: center; margin-top: 0;">\n        <span class="sh_notice_text"><%= noticeText %></span>\n        <div class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.open.ticket\') %>"><%= translate(" ") %></div>\n    </div>\n\n    <a id="sh_mailto_link_notice" href="mailto:<%= projectEmail%>?subject=Ticket to support" target="_blank" style="text-decoration: none;">\n        <div class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.notice.mailto\') %>"><%= translate(" ") %></div>\n    </a>\n\n    <div class="sh_clear"></div>\n    <div class="shc sh_chat_question" rel="step" style="text-align: center; margin-top: 0;">\n        <div class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.notice.back\') %>"><%= translate("   ") %></div>\n    </div>\n</div>',offline:'<div class="shc sh_offline">\n    <div rel="form" class="shc sh_form sh_offline_form" data-id="sh_form_" data-type="">\n        <div rel="step" class="shc sh_form_step sh_form_step_act">\n            <span style="display: none;">1.</span>\n        </div>\n\n        <div class="sh_clear"></div>\n\n        <div rel="description" class="shc sh_form_description">\n            <%= translate("   . ,      ,    !") %>\n        </div>\n\n        <div rel="fields" class="shc sh_form_fields">\n            <div rel="field" class="shc sh_form_field sh_form_field_text">\n                <input type="text" class="shc sh_input" placeholder="<%= translate(" *") %>" title="<%= translate("") %>" name="chat[offline][name]">\n            </div>\n\n            <div rel="field" class="shc sh_form_field sh_form_field_text">\n                <input type="text" class="shc sh_input" placeholder="<%= translate("*") %>" title="<%= translate("") %>" name="chat[offline][email]">\n            </div>\n\n            <div rel="field" class="shc sh_form_field sh_form_field_text">\n                <input type="text" class="shc sh_input" placeholder="<%= translate("*") %>" title="<%= translate("") %>" name="chat[offline][phone]" maxlength="20">\n            </div>\n\n            <div rel="field" class="shc sh_form_field_textarea">\n                <textarea class="shc sh_textarea" placeholder="<%= translate(" *") %>" title="<%= translate(" ") %>" name="chat[offline][comment]"></textarea>\n            </div>\n        </div>\n\n        <div rel="form_button" class="shc sh_button sh_button_submit" onclick="<%= handler(\'block.offline.request\') %>"><%= translate("") %></div>\n\n        <div rel="apidescription" class="shc sh_form_result"></div>\n    </div>\n    \n    <div class="shc sh_offline_done sh_hide">\n        <div class="shc sh_letter_img"></div>\n        <div class="shc sh_successfully"><%= translate("!") %></div>\n        <div class="shc sh_message_sent"><%= translate(" .") %></div>\n        <div rel="close" class="shc sh_button sh_button_close" onclick="<%= handler(\'block.offline.close\') %>"><%= translate(" ") %></div>\n    </div>\n</div>',online:'<div rel="online" class="shc sh_online_box">\n    <div rel="scrollbar" class="shc sh_messages sh_scrollbar" id="sh_messages" style="height: 299px;">\n        <%= controller(\'history\') %>\n        <%= controller(\'wait\') %>\n    </div>\n\n    <div rel="footer" class="shc sh_footer">\n        <div id="sh_button_invite_operator" class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.online.inviteOperator\') %>" style="margin-top: 0; display: none;"><%= translate(" ") %></div>\n        <div id="sh_button_close_chat" class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.online.closeChat\') %>" style="margin-top: 2px; display: none;"><%= translate("") %></div>\n\n        <div class="shc sh_footer_menu_list">\n            <div title="<%= translate("") %>" rel="sound" class="shc sh_footer_menu<%= mute %>" onclick="<%= handler(\'block.online.mute\') %>">\n                <div class="shc sh_ic sh_ic_sound"></div>\n            </div>\n\n            <div rel="complate" class="shc sh_button sh_button_send sh_button_back sh_button_gray_complete" onclick="<%= handler(\'block.online.send\') %>"><%= translate("") %></div>\n            <div rel="complate" class="shc sh_button sh_button_back sh_button_gray_complete" onclick="<%= handler(\'block.online.finish\') %>"><%= translate("") %></div>\n\n            <div title="<%= translate(" ") %>" rel="attach" class="shc sh_footer_menu" id="attach_button_block" style="display: none; position: relative;">\n                <div class="shc sh_ic sh_ic_attach"></div>\n                <div style="position: absolute; left: 0px; top: 0px; overflow: hidden; z-index: 10; width: 28px; height: 30px;">\n                    <input type="file" class="sh_attach_file" name="file" style="width: 28px; height: 30px; position: absolute; left: 0px; top: 0px; opacity: 0; cursor: pointer;">\n                </div>\n            </div>\n\n            <div title="<%= translate("") %>" rel="smiles" id="YH_smiles" class="shc sh_footer_menu" onclick="<%= handler(\'block.online.showSmiles\') %>">\n                <div class="shc sh_ic sh_ic_smiles"></div>\n                <div class="shc sh_smiles" style="display: none;">\n                    <div class="shc sh_point"></div>\n                    <% _.each(smiles, function (value) { %>\n                    <div class="shc sh_smile_menu" onclick="<%= handler(\'block.online.selectSmile\') %>">\n                        <div class="shc sh_smile sh_smile_icon" rel="smile" data-name="<%= value %>"></div>\n                    </div>\n                    <% }); %>\n                </div>\n            </div>\n        </div>\n\n        <div rel="answer_form" class="shc sh_textarea_answer">\n            <textarea name="text" placeholder="<%= translate("  ...") %>" class="shc sh_textarea_field" style="width: 296px;" onkeyup="<%= handler(\'block.online.inputMessage\') %>"><%= message %></textarea>\n        </div>\n    </div>\n</div>',queue:'<div class="shc sh_form" rel="form" style="padding: 8px; overflow: hidden;">\n    <div class="shc sh_chat_question" rel="step" style="text-align: center; margin-top: 0;">\n        <%= highload || (offlineText || translate("!<br>     .  ,    ")) %>\n        <div class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.open.ticket\') %>"><%= translate(" ") %></div>\n    </div>\n    <div class="sh_clear"></div>\n    \x3c!--<div class="shc sh_chat_decision">\n        <div class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.open.email\') %>"><%= translate(" ") %></div>\n    </div>--\x3e\n    <div class="shc sh_chat_question" id="chatButton" rel="step" style="text-align: center; margin-top: 0;">\n        <%= translate("    ,     ") %>\n        <div class="shc sh_form_field sh_form_field_text" rel="field" style="margin-top: 8px;">\n            <input type="text" maxlength="20" placeholder="<%= translate(" ...") %>" value="<%= name %>" class="shc sh_input" id="cw-client-name-queue">\n        </div>\n        <%= translate(" ") %>\n        <div class="shc sh_button" rel="form_button" onclick="<%= handler(\'block.open.online\') %>"><%= translate(" ") %></div>\n    </div>\n</div>',wait:'<div class="sh_wait_connection" rel="wait"><%= text_waiting %></div>'},faq:{block:'<div class="shc sh_online_box">\n    <div class="shc sh_form" rel="form">\n        <div class="shc sh_form_step sh_form_step_act" id="cw-dialog-question" rel="step"></div>\n        <div class="sh_clear"></div>\n        <div class="shc sh_form_description" rel="description"></div>\n\n        <div class="shc sh_form_fields" rel="fields" id="faqBodyWrapper">\n            <div class="shc sh_form_field sh_form_field_text faq_search" rel="field">\n                <div class="search-icon" onclick="<%= handler(\'block.faq.action_search\') %>"></div>\n                <input type="text" title="<%= translate("   ") %>" placeholder="<%= translate("   ") %>" class="shc sh_input" id="cw-client-question" list="tagList">\n                <datalist id="tagList">\n                </datalist>\n            </div>\n            <div id="tagsCloudBlock" class="tag-cloud" style="display: none;">\n                <div class="tag-cloud-header"><%= translate(" ") %></div>\n                <div class="tag-cloud-body" id="tagCloud" ></div>\n            </div>\n            <div>\n                <div id="qListHeader" class="questions-list-header"><%= translate(" ") %></div>\n                <div id="questionList"></div>\n            </div>\n        </div>\n        <div class="shc sh_form_result" rel="apidescription"></div>\n    </div>\n</div>',not_found:'<div>\n    <p style="padding: 0 10px;"><%= question %></p>\n</div>\n',question:'<div class="shc sh_online_box">\n    <div class="shc sh_form" rel="form">\n        <div id="question">\n        </div>\n<hr>\n        <div id="answer">\n        </div>\n    </div>\n</div>',question_list_item:'<div data-id="<%= id %>" class="shc_accordion" onclick="<%= handler(\'block.faq.question_toggle\') %>">\n    <div class="shc_accordion_question_block" style="display: inline-block"><%= question %></div>\n    <div style="display: inline-block" class="accordion_arrow_down"></div>\n</div>\n<div class="shc_faq_panel" id="panel_<%= id %>">\n    <p><%= answer %></p>\n</div>',tag_cloud_list_item:'<button class="tag-cloud-button" onclick="<%= handler(\'faq.tag_selected\') %>" id="<%= id %>">#<%= tag %></button>\n',tag_list_item:'<option value="<%= name %>" data-id="<%= id %>" />',wait:'<li class="list-group-item sh_wait_connection" rel="wait" style="height: 40px; border: 0;"> <%= text_waiting %></li>'},message:{block:'<div class="shc sh_message" id="cw-message-<%= id %>" data-id="<%= data_id %>">\n    <div class="shc sh_photo" style="height: auto;">\n        <img src="<%= photo %>" class="sh_avatar" style="height: auto;">\n    </div>\n\n    <div class="shc sh_mess_content">\n        <div class="shc sh_mess_details">\n            <div class="shc sh_mess_time"><%= time %></div>\n            <div class="shc sh_mess_nick<%= nick_sel %>"><%= name %></div>\n        </div>\n        \n        <div rel="text" class="shc sh_message_items"><%= items %></div>\n\n        <div><a href="mailto:<%= support_email %>?subject=Ticket to support"><%= support_email %></a></div>\n    </div>\n    \n    <div class="shc sh_clear"></div>\n</div>',file:'<div class="sh_file sh_file_icon sh_file_icon_file" style="clear: both;">\n    <a href="<%= node_host %>/chat/attach/<%= message_id %>-<%= basename %>" target="_blank" title="<%= filename %>"><%= shortname %> (<%= filesize %>)</a>\n</div>',form:'<div class="cw-form"><%= html %></div>\n<input class="cw-form-submit" type="button" value="<%= translate("") %>" style="background: #fff; border: 1px solid #d7d7d7;">',item:'<div class="shc sh_mess_text" id="sh_<%= message_id %>"><%= text %></div>',smile:'<div class="shc sh_smile sh_smile_img" data-name="<%= name %>"></div>'},push:{block:'<div id="rh-arrow" style="padding: 0px; display: block; bottom: auto; right: auto; right: 40px; top: 331px;" class="rh-reset rh-left">\n    <div class="placeholder">\n        <div id="rh-invitation" class="rh-arrowContainer" style="">\n            <div class="rh-text rh-reset">\n                <img alt="" class="rh-face rh-reset" src="<%= host %>/images/operator.png">\n                <div style="float: left; margin-right: 5px">\n                    <pre id="rh-welcome" class="rh-reset" ><%= text %></pre>\n                    <div id="rh-choice" class="rh-reset">\n                        <a id="rh-choiceYes" class="rh-btn rh-reset"><%= yes_button %></a>\n                        <a id="rh-choiceNo" class="rh-btn rh-reset"><%= no_button %></a>\n                    </div>\n                </div>\n                <div style="clear: both"></div>\n            </div>\n        </div>\n    </div>\n    <a id="rh-choiceClose" class="rh-close rh-reset"></a>\n    <div class="rh-reset rh-arrow_itself" style="top: 47.5px;"></div>\n</div>'}}),document.getElementsByClassName||(document.getElementsByClassName=function(e){for(var t=[],n=document.getElementsByTagName("*"),i=0;i<n.length;i++)for(var o=n[i].className.split(" "),r=0;r<o.length;r++)o[r]===e&&t.push(n[i]);return t},"object"==typeof Element&&(Element.prototype.getElementsByClassName=document.getElementsByClassName)),String.trim||(String.trim=function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},String.prototype.trim=String.trim),String.nl2br||(String.nl2br=function(){return this.replace(/\n/g,"<br>\n")},String.prototype.nl2br=String.nl2br);var ChatWidget={init:function(e,t,n,i,o){JSFrame.getService("chat").init(e,n,o,i)},show:function(){JSFrame.getController("button").openBlock()},hide:function(){JSFrame.getService("router").go("button")},on:JSFrame.getService("event").on,off:JSFrame.getService("event").off,trigger:JSFrame.getService("event").trigger};window.ChatWidget=ChatWidget,window.YHelperChat=YHelperChat,window.YHelperChatData&&new YHelperChat(window.YHelperChatData),ratingInit();var _=this._}});